import{n as fe,s as ce,e as ve,f as ke,h as $,i as x,r as ge,b as ye}from"../chunks/scheduler.b5ae7a1c.js";import{S as Ce,i as be,r as we,s as M,g as S,e as q,u as Te,c as O,h as R,z as he,k as A,v as Ee,a as N,d as Ae,t as Ne,f as k,w as je,m as B,j as I,n as D,y as E,o as X,A as Ue,B as Q,C as Fe}from"../chunks/index.927ad61c.js";import{M as Se,v as Re,e as ee,c as te}from"../chunks/version.988eaa30.js";import{r as Ie}from"../chunks/index.c7c77810.js";const Me=typeof window<"u";let Oe=Me?e=>requestAnimationFrame(e):fe;var ne={},z={},H=34,L=10,V=13;function pe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Be(e,t){var n=pe(e);return function(r,s){return t(n(r),s,e)}}function re(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var s in r)s in t||n.push(t[s]=s)}),n}function T(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function De(e){return e<0?"-"+T(-e,6):e>9999?"+"+T(e,6):T(e,4)}function Le(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":De(e.getUTCFullYear())+"-"+T(e.getUTCMonth()+1,2)+"-"+T(e.getUTCDate(),2)+(s?"T"+T(t,2)+":"+T(n,2)+":"+T(r,2)+"."+T(s,3)+"Z":r?"T"+T(t,2)+":"+T(n,2)+":"+T(r,2)+"Z":n||t?"T"+T(t,2)+":"+T(n,2)+"Z":"")}function Pe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(o,l){var C,i,a=s(o,function(w,b){if(C)return C(w,b-1);i=w,C=l?Be(w,l):pe(w)});return a.columns=i||[],a}function s(o,l){var C=[],i=o.length,a=0,w=0,b,_=i<=0,f=!1;o.charCodeAt(i-1)===L&&--i,o.charCodeAt(i-1)===V&&--i;function y(){if(_)return z;if(f)return f=!1,ne;var j,U=a,v;if(o.charCodeAt(U)===H){for(;a++<i&&o.charCodeAt(a)!==H||o.charCodeAt(++a)===H;);return(j=a)>=i?_=!0:(v=o.charCodeAt(a++))===L?f=!0:v===V&&(f=!0,o.charCodeAt(a)===L&&++a),o.slice(U+1,j-1).replace(/""/g,'"')}for(;a<i;){if((v=o.charCodeAt(j=a++))===L)f=!0;else if(v===V)f=!0,o.charCodeAt(a)===L&&++a;else if(v!==n)continue;return o.slice(U,j)}return _=!0,o.slice(U,i)}for(;(b=y())!==z;){for(var m=[];b!==ne&&b!==z;)m.push(b),b=y();l&&(m=l(m,w++))==null||C.push(m)}return C}function u(o,l){return o.map(function(C){return l.map(function(i){return p(C[i])}).join(e)})}function c(o,l){return l==null&&(l=re(o)),[l.map(p).join(e)].concat(u(o,l)).join(`
`)}function h(o,l){return l==null&&(l=re(o)),u(o,l).join(`
`)}function d(o){return o.map(g).join(`
`)}function g(o){return o.map(p).join(e)}function p(o){return o==null?"":o instanceof Date?Le(o):t.test(o+="")?'"'+o.replace(/"/g,'""')+'"':o}return{parse:r,parseRows:s,format:c,formatBody:h,formatRows:d,formatRow:g,formatValue:p}}var Ye=Pe(","),Xe=Ye.parse;function qe(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ze(e,t){return fetch(e,t).then(qe)}function ze(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Ze(t,n).then(function(s){return e(s,r)})}}var He=ze(Xe);function P(e,t,n){this.k=e,this.x=t,this.y=n}P.prototype={constructor:P,scale:function(e){return e===1?this:new P(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new P(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};P.prototype;function ie(){const t=new Date().toLocaleTimeString("en-US"),n=t.substring(0,t.length-6),r=t.substring(t.length-2);return{time:n,period:r}}const Ve=Ie(ie(),e=>{const n=setInterval(()=>e(ie()),1e3);return()=>clearInterval(n)});function se(e,t,n){const r=e.slice();r[22]=t[n].text,r[23]=t[n].highlight;const s=r[23]?"mark":"span";return r[24]=s,r}function oe(e){let t,n,r,s,u,c,h,d,g,p,o=e[3].artist+"",l,C,i,a,w,b=ee(e[4]),_=[];for(let f=0;f<b.length;f+=1)_[f]=le(se(e,b,f));return{c(){t=S("time"),n=B(e[1]),r=M(),s=B(e[5]),u=M(),c=S("h1"),h=S("span");for(let f=0;f<_.length;f+=1)_[f].c();d=M(),g=S("span"),p=B("By "),l=B(o),C=M(),i=S("a"),a=B("link"),this.h()},l(f){t=R(f,"TIME",{class:!0});var y=I(t);n=D(y,e[1]),r=O(y),s=D(y,e[5]),y.forEach(k),u=O(f),c=R(f,"H1",{class:!0});var m=I(c);h=R(m,"SPAN",{class:!0});var j=I(h);for(let F=0;F<_.length;F+=1)_[F].l(j);j.forEach(k),d=O(m),g=R(m,"SPAN",{class:!0});var U=I(g);p=D(U,"By "),l=D(U,o),C=O(U),i=R(U,"A",{href:!0,target:!0,rel:!0});var v=I(i);a=D(v,"link"),v.forEach(k),U.forEach(k),m.forEach(k),this.h()},h(){A(t,"class","svelte-rvsehe"),A(h,"class","title svelte-rvsehe"),A(i,"href",w=e[3].href),A(i,"target","_blank"),A(i,"rel","noreferrer"),A(g,"class","artist svelte-rvsehe"),A(c,"class","svelte-rvsehe")},m(f,y){N(f,t,y),E(t,n),E(t,r),E(t,s),N(f,u,y),N(f,c,y),E(c,h);for(let m=0;m<_.length;m+=1)_[m]&&_[m].m(h,null);E(c,d),E(c,g),E(g,p),E(g,l),E(g,C),E(g,i),E(i,a)},p(f,y){if(y&2&&X(n,f[1]),y&32&&X(s,f[5]),y&16){b=ee(f[4]);let m;for(m=0;m<b.length;m+=1){const j=se(f,b,m);_[m]?_[m].p(j,y):(_[m]=le(j),_[m].c(),_[m].m(h,null))}for(;m<_.length;m+=1)_[m].d(1);_.length=b.length}y&8&&o!==(o=f[3].artist+"")&&X(l,o),y&8&&w!==(w=f[3].href)&&A(i,"href",w)},d(f){f&&(k(t),k(u),k(c)),Ue(_,f)}}}function J(e){let t,n=e[22]+"",r;return{c(){t=S(e[24]),r=B(n),this.h()},l(s){t=R(s,(e[24]||"null").toUpperCase(),{class:!0});var u=I(t);r=D(u,n),u.forEach(k),this.h()},h(){Fe(e[24])(t,{class:"svelte-rvsehe"})},m(s,u){N(s,t,u),E(t,r)},p(s,u){u&16&&n!==(n=s[22]+"")&&X(r,n)},d(s){s&&k(t)}}}function le(e){let t=e[24],n,r=e[24]&&J(e);return{c(){r&&r.c(),n=q()},l(s){r&&r.l(s),n=q()},m(s,u){r&&r.m(s,u),N(s,n,u)},p(s,u){s[24]?t?ce(t,s[24])?(r.d(1),r=J(s),t=s[24],r.c(),r.m(n.parentNode,n)):r.p(s,u):(r=J(s),t=s[24],r.c(),r.m(n.parentNode,n)):t&&(r.d(1),r=null,t=s[24])},d(s){s&&k(n),r&&r.d(s)}}}function ae(e){let t,n,r="Enable Audio",s,u;return{c(){t=S("p"),n=S("button"),n.textContent=r,this.h()},l(c){t=R(c,"P",{class:!0});var h=I(t);n=R(h,"BUTTON",{"data-svelte-h":!0}),he(n)!=="svelte-1sl3zi7"&&(n.textContent=r),h.forEach(k),this.h()},h(){A(t,"class","svelte-rvsehe")},m(c,h){N(c,t,h),E(t,n),s||(u=Q(n,"click",e[11]),s=!0)},p:fe,d(c){c&&k(t),s=!1,u()}}}function ue(e){let t,n,r,s,u;function c(){cancelAnimationFrame(r),t.paused||(r=Oe(c)),e[14].call(t)}return{c(){t=S("audio"),this.h()},l(h){t=R(h,"AUDIO",{src:!0,preload:!0}),I(t).forEach(k),this.h()},h(){$(t.src,n=e[3].preview_url)||A(t,"src",n),A(t,"preload",""),t.autoplay=!0,e[0]===void 0&&x(c),e[0]===void 0&&x(()=>e[15].call(t))},m(h,d){N(h,t,d),e[16](t),s||(u=[Q(t,"timeupdate",c),Q(t,"ended",e[15])],s=!0)},p(h,d){d&8&&!$(t.src,n=h[3].preview_url)&&A(t,"src",n)},d(h){h&&k(t),e[16](null),s=!1,ge(u)}}}function Je(e){var C;let t,n,r,s="This is a clock where the time is in the title of a song.",u,c,h,d,g;t=new Se({props:{title:e[7],description:e[8],url:e[9],preloadFont:e[6],keywords:e[10]}});let p=e[3]&&oe(e),o=e[2]&&ae(e),l=((C=e[3])==null?void 0:C.preview_url)&&ue(e);return{c(){we(t.$$.fragment),n=M(),r=S("p"),r.textContent=s,u=M(),p&&p.c(),c=M(),o&&o.c(),h=M(),l&&l.c(),d=q(),this.h()},l(i){Te(t.$$.fragment,i),n=O(i),r=R(i,"P",{class:!0,"data-svelte-h":!0}),he(r)!=="svelte-1rtwy5v"&&(r.textContent=s),u=O(i),p&&p.l(i),c=O(i),o&&o.l(i),h=O(i),l&&l.l(i),d=q(),this.h()},h(){A(r,"class","svelte-rvsehe")},m(i,a){Ee(t,i,a),N(i,n,a),N(i,r,a),N(i,u,a),p&&p.m(i,a),N(i,c,a),o&&o.m(i,a),N(i,h,a),l&&l.m(i,a),N(i,d,a),g=!0},p(i,[a]){var w;i[3]?p?p.p(i,a):(p=oe(i),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null),i[2]?o?o.p(i,a):(o=ae(i),o.c(),o.m(h.parentNode,h)):o&&(o.d(1),o=null),(w=i[3])!=null&&w.preview_url?l?l.p(i,a):(l=ue(i),l.c(),l.m(d.parentNode,d)):l&&(l.d(1),l=null)},i(i){g||(Ae(t.$$.fragment,i),g=!0)},o(i){Ne(t.$$.fragment,i),g=!1},d(i){i&&(k(n),k(r),k(u),k(c),k(h),k(d)),je(t,i),p&&p.d(i),o&&o.d(i),l&&l.d(i)}}}function Qe(e,t,n){let r,s,u;ve(e,Ve,v=>n(13,u=v)),Re();let c,h,d,g,p;const o=[],{title:l,description:C,url:i,keywords:a}=te;ke("copy",te);function w(v){const F=v.toLowerCase(),Y=s.toLowerCase(),G=F.indexOf(`${r} ${Y}`)>-1?`${r} ${Y}`:r,Z=F.indexOf(G),K=Z+G.length,me=v.slice(0,Z),de=v.slice(Z,K),_e=v.slice(K);return[{text:me},{text:de,highlight:!0},{text:_e}]}function b(){const v=h.filter(W=>W.time===r),F=Math.floor(Math.random()*v.length),Y=d==null?void 0:d.id;n(3,d={...v[F]}),Y===d.id&&c.play(),n(4,g=w(d.name))}function _(){b()}async function f(){const v=await He("../assets/tracks.csv");n(12,h=v.map(F=>({...F,popularity:+F.popularity})))}function y(){c.play()}function m(){p=this.ended,n(0,p)}function j(){p=this.ended,n(0,p)}function U(v){ye[v?"unshift":"push"](()=>{c=v,n(2,c)})}return e.$$.update=()=>{e.$$.dirty&8192&&n(1,r=u.time),e.$$.dirty&8192&&n(5,s=u.period),e.$$.dirty&4098&&h&&_(),e.$$.dirty&1&&p&&b()},f(),[p,r,c,d,g,s,o,l,C,i,a,y,h,u,m,j,U]}class et extends Ce{constructor(t){super(),be(this,t,Qe,Je,ce,{})}}export{et as component};
