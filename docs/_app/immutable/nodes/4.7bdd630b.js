import{v as U,s as X,f as A,g as N,h as P,d as m,j as b,i as y,D as ge,e as ne,l as F,m as S,u as E,n as W,a as T,c as C,F as se,G as le,I as Ne,J as ie,K as H,L as j,M as Te,N as Ce,o as Pe,p as ke,A as De,C as Me,B as Fe}from"../chunks/scheduler.4c2085d6.js";import{S as Y,i as Z,b as L,d as q,m as z,a as $,t as M,c as oe,e as K,g as ae}from"../chunks/index.3764b306.js";import{c as Se,a as Oe}from"../chunks/clock.6996aad5.js";import{e as J,M as je,W as Ie,v as Be,c as fe}from"../chunks/version.5d4a1ba8.js";import{T as Le}from"../chunks/Title.a6c8101c.js";import{w as qe}from"../chunks/index.36f0bf5b.js";const we=typeof window<"u";let ze=we?()=>window.performance.now():()=>Date.now(),x=we?r=>requestAnimationFrame(r):U;const B=new Set;function ye(r){B.forEach(e=>{e.c(r)||(B.delete(e),e.f())}),B.size!==0&&x(ye)}function Ke(r){let e;return B.size===0&&x(ye),{promise:new Promise(s=>{B.add(e={c:r,f:s})}),abort(){B.delete(e)}}}function ue(r,e,s){const l=r.slice();return l[1]=e[s].text,l[2]=e[s].mark,l}function ce(r,e,s){const l=r.slice();l[5]=e[s];const t=l[5]===":";return l[6]=t,l}function Ue(r){let e,s=r[1]+"",l;return{c(){e=A("span"),l=F(s),this.h()},l(t){e=N(t,"SPAN",{class:!0});var n=P(e);l=S(n,s),n.forEach(m),this.h()},h(){b(e,"class","svelte-4nvwp7")},m(t,n){y(t,e,n),E(e,l)},p(t,n){n&1&&s!==(s=t[1]+"")&&W(l,s)},d(t){t&&m(e)}}}function We(r){let e,s,l=J(r[1]),t=[];for(let n=0;n<l.length;n+=1)t[n]=pe(ce(r,l,n));return{c(){e=A("mark");for(let n=0;n<t.length;n+=1)t[n].c();s=T(),this.h()},l(n){e=N(n,"MARK",{class:!0});var i=P(e);for(let o=0;o<t.length;o+=1)t[o].l(i);s=C(i),i.forEach(m),this.h()},h(){b(e,"class","svelte-4nvwp7")},m(n,i){y(n,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);E(e,s)},p(n,i){if(i&1){l=J(n[1]);let o;for(o=0;o<l.length;o+=1){const c=ce(n,l,o);t[o]?t[o].p(c,i):(t[o]=pe(c),t[o].c(),t[o].m(e,s))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&m(e),ge(t,n)}}}function pe(r){let e,s=r[5]+"",l;return{c(){e=A("span"),l=F(s),this.h()},l(t){e=N(t,"SPAN",{class:!0});var n=P(e);l=S(n,s),n.forEach(m),this.h()},h(){b(e,"class","svelte-4nvwp7"),se(e,"colon",r[6])},m(t,n){y(t,e,n),E(e,l)},p(t,n){n&1&&s!==(s=t[5]+"")&&W(l,s),n&1&&se(e,"colon",t[6])},d(t){t&&m(e)}}}function _e(r){let e;function s(n,i){return n[2]?We:Ue}let l=s(r),t=l(r);return{c(){t.c(),e=ne()},l(n){t.l(n),e=ne()},m(n,i){t.m(n,i),y(n,e,i)},p(n,i){l===(l=s(n))&&t?t.p(n,i):(t.d(1),t=l(n),t&&(t.c(),t.m(e.parentNode,e)))},d(n){n&&m(e),t.d(n)}}}function Ge(r){let e,s=J(r[0]),l=[];for(let t=0;t<s.length;t+=1)l[t]=_e(ue(r,s,t));return{c(){e=A("p");for(let t=0;t<l.length;t+=1)l[t].c();this.h()},l(t){e=N(t,"P",{class:!0});var n=P(e);for(let i=0;i<l.length;i+=1)l[i].l(n);n.forEach(m),this.h()},h(){b(e,"class","svelte-4nvwp7")},m(t,n){y(t,e,n);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null)},p(t,[n]){if(n&1){s=J(t[0]);let i;for(i=0;i<s.length;i+=1){const o=ue(t,s,i);l[i]?l[i].p(o,n):(l[i]=_e(o),l[i].c(),l[i].m(e,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=s.length}},i:U,o:U,d(t){t&&m(e),ge(l,t)}}}function Je(r,e,s){let{data:l}=e;return r.$$set=t=>{"data"in t&&s(0,l=t.data)},[l]}class Re extends Y{constructor(e){super(),Z(this,e,Je,Ge,X,{data:0})}}function de(r){return Object.prototype.toString.call(r)==="[object Date]"}function Q(r,e){if(r===e||r!==r)return()=>r;const s=typeof r;if(s!==typeof e||Array.isArray(r)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(r)){const l=e.map((t,n)=>Q(r[n],t));return t=>l.map(n=>n(t))}if(s==="object"){if(!r||!e)throw new Error("Object cannot be null");if(de(r)&&de(e)){r=r.getTime(),e=e.getTime();const n=e-r;return i=>new Date(r+i*n)}const l=Object.keys(e),t={};return l.forEach(n=>{t[n]=Q(r[n],e[n])}),n=>{const i={};return l.forEach(o=>{i[o]=t[o](n)}),i}}if(s==="number"){const l=e-r;return t=>r+t*l}throw new Error(`Cannot interpolate ${s} values`)}function Ve(r,e={}){const s=qe(r);let l,t=r;function n(i,o){if(r==null)return s.set(r=i),Promise.resolve();t=i;let c=l,f=!1,{delay:p=0,duration:d=400,easing:k=Ne,interpolate:g=Q}=le(le({},e),o);if(d===0)return c&&(c.abort(),c=null),s.set(r=t),Promise.resolve();const u=ze()+p;let _;return l=Ke(w=>{if(w<u)return!0;f||(_=g(r,i),typeof d=="function"&&(d=d(r,i)),f=!0),c&&(c.abort(),c=null);const a=w-u;return a>d?(s.set(r=i),!1):(s.set(r=_(k(a/d))),!0)}),l.promise}return{set:n,update:(i,o)=>n(i(t,r),o),subscribe:s.subscribe}}function He(r){let e,s,l=!1,t,n=!0,i,o;function c(){cancelAnimationFrame(t),e.paused||(t=x(c),l=!0),r[10].call(e)}return{c(){e=A("audio"),this.h()},l(f){e=N(f,"AUDIO",{src:!0,preload:!0}),P(e).forEach(m),this.h()},h(){ie(e.src,s=r[0])||b(e,"src",s),b(e,"preload",""),e.autoplay=!0,(r[1]===void 0||r[4]===void 0)&&H(c),r[1]===void 0&&H(()=>r[11].call(e)),r[5]===void 0&&H(()=>r[14].call(e))},m(f,p){y(f,e,p),isNaN(r[3])||(e.volume=r[3]),e.muted=r[6],r[15](e),i||(o=[j(e,"timeupdate",c),j(e,"ended",r[11]),j(e,"volumechange",r[12]),j(e,"play",r[13]),j(e,"pause",r[13]),j(e,"durationchange",r[14])],i=!0)},p(f,[p]){p&1&&!ie(e.src,s=f[0])&&b(e,"src",s),!l&&p&16&&!isNaN(f[4])&&(e.currentTime=f[4]),l=!1,p&8&&!isNaN(f[3])&&(e.volume=f[3]),p&64&&(e.muted=f[6]),p&128&&n!==(n=f[7])&&e[n?"pause":"play"]()},i:U,o:U,d(f){f&&m(e),r[15](null),i=!1,Te(o)}}}function Qe(r,e,s){let{src:l}=e,t=new Date,n,i,o,c,f,p,d;const k=Ce(),g=Ve(0),u=()=>{n&&(s(4,c=0),n.play(),s(3,o=1),g.set(1,{duration:500}))};Pe(()=>{setInterval(()=>{s(9,t=new Date)},500)});function _(){i=this.ended,c=this.currentTime,s(1,i),s(4,c)}function w(){i=this.ended,s(1,i)}function a(){o=this.volume,p=this.muted,s(3,o),s(6,p)}function h(){d=this.paused,s(7,d)}function I(){f=this.duration,s(5,f)}function R(O){ke[O?"unshift":"push"](()=>{n=O,s(2,n)})}return r.$$set=O=>{"src"in O&&s(0,l=O.src)},r.$$.update=()=>{r.$$.dirty&2&&i&&k("ended"),r.$$.dirty&512&&t.getSeconds()},[l,i,n,o,c,f,p,d,u,t,_,w,a,h,I,R]}class Xe extends Y{constructor(e){super(),Z(this,e,Qe,He,X,{src:0,play:8})}get play(){return this.$$.ctx[8]}}function me(r){let e,s,l,t,n,i=r[0].artist+"",o,c,f,p,d,k,g;return s=new Re({props:{data:r[3]}}),{c(){e=A("div"),L(s.$$.fragment),l=T(),t=A("p"),n=F("By "),o=F(i),c=T(),f=A("a"),p=F("link"),k=F(`
	pa`),this.h()},l(u){e=N(u,"DIV",{class:!0});var _=P(e);q(s.$$.fragment,_),_.forEach(m),l=C(u),t=N(u,"P",{class:!0});var w=P(t);n=S(w,"By "),o=S(w,i),c=C(w),f=N(w,"A",{href:!0,target:!0,rel:!0});var a=P(f);p=S(a,"link"),a.forEach(m),w.forEach(m),k=S(u,`
	pa`),this.h()},h(){b(e,"class","clock"),b(f,"href",d=r[0].href),b(f,"target","_blank"),b(f,"rel","noreferrer"),b(t,"class","artist svelte-1f29337")},m(u,_){y(u,e,_),z(s,e,null),y(u,l,_),y(u,t,_),E(t,n),E(t,o),E(t,c),E(t,f),E(f,p),y(u,k,_),g=!0},p(u,_){const w={};_&8&&(w.data=u[3]),s.$set(w),(!g||_&1)&&i!==(i=u[0].artist+"")&&W(o,i),(!g||_&1&&d!==(d=u[0].href))&&b(f,"href",d)},i(u){g||($(s.$$.fragment,u),g=!0)},o(u){M(s.$$.fragment,u),g=!1},d(u){u&&(m(e),m(l),m(t),m(k)),K(s)}}}function he(r){let e,s,l="Enable Audio",t,n,i,o,c,f={src:r[0].preview_url};return n=new Xe({props:f}),r[14](n),n.$on("ended",r[15]),{c(){e=A("p"),s=A("button"),s.textContent=l,t=T(),L(n.$$.fragment),this.h()},l(p){e=N(p,"P",{class:!0});var d=P(e);s=N(d,"BUTTON",{"data-svelte-h":!0}),Fe(s)!=="svelte-1sl3zi7"&&(s.textContent=l),d.forEach(m),t=C(p),q(n.$$.fragment,p),this.h()},h(){b(e,"class","svelte-1f29337")},m(p,d){y(p,e,d),E(e,s),y(p,t,d),z(n,p,d),i=!0,o||(c=j(s,"click",r[11]),o=!0)},p(p,d){const k={};d&1&&(k.src=p[0].preview_url),n.$set(k)},i(p){i||($(n.$$.fragment,p),i=!0)},o(p){M(n.$$.fragment,p),i=!1},d(p){p&&(m(e),m(t)),r[14](null),K(n,p),o=!1,c()}}}function Ye(r){var w;let e,s,l,t,n,i,o,c,f,p,d,k,g;e=new je({props:{title:r[6],description:r[7],url:r[8],preloadFont:r[5],keywords:r[9]}}),l=new Ie({}),n=new Le({props:{text:"a clock where the time appears in a song title"}});let u=r[0]&&me(r),_=((w=r[0])==null?void 0:w.preview_url)&&he(r);return{c(){L(e.$$.fragment),s=T(),L(l.$$.fragment),t=T(),L(n.$$.fragment),i=T(),u&&u.c(),o=T(),_&&_.c(),c=T(),f=A("time"),p=F(r[1]),d=T(),k=F(r[4]),this.h()},l(a){q(e.$$.fragment,a),s=C(a),q(l.$$.fragment,a),t=C(a),q(n.$$.fragment,a),i=C(a),u&&u.l(a),o=C(a),_&&_.l(a),c=C(a),f=N(a,"TIME",{class:!0});var h=P(f);p=S(h,r[1]),d=C(h),k=S(h,r[4]),h.forEach(m),this.h()},h(){b(f,"class","svelte-1f29337")},m(a,h){z(e,a,h),y(a,s,h),z(l,a,h),y(a,t,h),z(n,a,h),y(a,i,h),u&&u.m(a,h),y(a,o,h),_&&_.m(a,h),y(a,c,h),y(a,f,h),E(f,p),E(f,d),E(f,k),g=!0},p(a,[h]){var I;a[0]?u?(u.p(a,h),h&1&&$(u,1)):(u=me(a),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ae(),M(u,1,1,()=>{u=null}),oe()),(I=a[0])!=null&&I.preview_url?_?(_.p(a,h),h&1&&$(_,1)):(_=he(a),_.c(),$(_,1),_.m(c.parentNode,c)):_&&(ae(),M(_,1,1,()=>{_=null}),oe()),(!g||h&2)&&W(p,a[1]),(!g||h&16)&&W(k,a[4])},i(a){g||($(e.$$.fragment,a),$(l.$$.fragment,a),$(n.$$.fragment,a),$(u),$(_),g=!0)},o(a){M(e.$$.fragment,a),M(l.$$.fragment,a),M(n.$$.fragment,a),M(u),M(_),g=!1},d(a){a&&(m(s),m(t),m(i),m(o),m(c),m(f)),K(e,a),K(l,a),K(n,a),u&&u.d(a),_&&_.d(a)}}}function Ze(r,e,s){let l,t,n,i;De(r,Oe,v=>s(13,i=v)),Be();let o,c,f;const p=[],{title:d,description:k,url:g,keywords:u}=fe;Me("copy",fe);function _(v){if(!v)return;const D=v.toLowerCase(),G=t.toLowerCase(),ee=D.indexOf(`${l} ${G}`)>-1?`${l} ${G}`:l,V=D.indexOf(ee),te=V+ee.length,be=v.slice(0,V),re=v.slice(V,te),Ee=re.split(":")[0],$e=re.split(":")[1],Ae=v.slice(te);return[{text:be},{mark:!0,text:[Ee,":",$e]},{text:Ae}]}function w(){s(0,c={name:l,artist:"No Track Found",href:""}),audioEl&&(audioEl.pause(),audioEl.currentTime=0)}function a(){const v=o.filter(D=>D.time===l);if(!v.length)w();else{const D=Math.floor(Math.random()*v.length),G=c==null?void 0:c.id;s(0,c={...v[D]}),G===c.id&&f.play()}}function h(){a()}async function I(){const v=await Se("../assets/tracks.csv");s(12,o=v.map(D=>({...D,popularity:+D.popularity})))}function R(){f.play()}function O(v){ke[v?"unshift":"push"](()=>{f=v,s(2,f)})}const ve=()=>a();return r.$$.update=()=>{r.$$.dirty&8192&&s(1,l=i.time),r.$$.dirty&8192&&s(4,t=i.period),r.$$.dirty&4098&&o&&h(),r.$$.dirty&1&&s(3,n=_(c==null?void 0:c.name))},I(),[c,l,f,n,t,p,d,k,g,u,a,R,o,i,O,ve]}class ot extends Y{constructor(e){super(),Z(this,e,Ze,Ye,X,{})}}export{ot as component};
