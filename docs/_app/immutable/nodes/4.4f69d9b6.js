import{y as G,s as W,E as J,F as ae,r as Ae,u as Oe,v as Ce,w as Se,f as N,l as Q,a as F,g as T,h as O,m as Z,d as h,c as D,j as y,i as v,x as E,n as ee,C as be,e as ie,G as fe,H as $e,I as ue,J as ne,K as B,L as Me,M as je,z as ke,o as Pe,p as oe,N as Fe,B as De,A as He,O as Ie,P as ze,Q as Be}from"../chunks/scheduler.41d38d81.js";import{S as X,i as Y,b as U,d as q,m as K,a as $,t as P,e as L,f as Ue,c as qe,g as Ke}from"../chunks/index.291ad8a1.js";import{c as Le,a as Re}from"../chunks/clock.1953af0c.js";import{e as x,M as Ve,v as Ge,c as ce}from"../chunks/version.3f52eec1.js";import{I as Je,g as Qe,a as Ze,H as We}from"../chunks/Header.4ea9a207.js";import{w as Xe}from"../chunks/index.7048af94.js";const we=typeof window<"u";let Ye=we?()=>window.performance.now():()=>Date.now(),le=we?n=>requestAnimationFrame(n):G;const V=new Set;function ve(n){V.forEach(e=>{e.c(n)||(V.delete(e),e.f())}),V.size!==0&&le(ve)}function xe(n){let e;return V.size===0&&le(ve),{promise:new Promise(s=>{V.add(e={c:n,f:s})}),abort(){V.delete(e)}}}const et=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function tt(n){let e;const s=n[2].default,o=Ae(s,n,n[3],null);return{c(){o&&o.c()},l(t){o&&o.l(t)},m(t,r){o&&o.m(t,r),e=!0},p(t,r){o&&o.p&&(!e||r&8)&&Oe(o,s,t,t[3],e?Se(s,t[3],r,null):Ce(t[3]),null)},i(t){e||($(o,t),e=!0)},o(t){P(o,t),e=!1},d(t){o&&o.d(t)}}}function nt(n){let e,s;const o=[{name:"help-circle"},n[1],{iconNode:n[0]}];let t={$$slots:{default:[tt]},$$scope:{ctx:n}};for(let r=0;r<o.length;r+=1)t=J(t,o[r]);return e=new Je({props:t}),{c(){U(e.$$.fragment)},l(r){q(e.$$.fragment,r)},m(r,l){K(e,r,l),s=!0},p(r,[l]){const a=l&3?Qe(o,[o[0],l&2&&Ze(r[1]),l&1&&{iconNode:r[0]}]):{};l&8&&(a.$$scope={dirty:l,ctx:r}),e.$set(a)},i(r){s||($(e.$$.fragment,r),s=!0)},o(r){P(e.$$.fragment,r),s=!1},d(r){L(e,r)}}}function rt(n,e,s){let{$$slots:o={},$$scope:t}=e;const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];return n.$$set=l=>{s(1,e=J(J({},e),ae(l))),"$$scope"in l&&s(3,t=l.$$scope)},e=ae(e),[r,e,o,t]}class st extends X{constructor(e){super(),Y(this,e,rt,nt,W,{})}}const ot=st;function lt(n){let e,s,o,t,r,l,a;return l=new ot({props:{size:"28"}}),{c(){e=N("footer"),s=N("h1"),o=Q(n[0]),t=F(),r=N("button"),U(l.$$.fragment),this.h()},l(u){e=T(u,"FOOTER",{class:!0});var i=O(e);s=T(i,"H1",{class:!0});var p=O(s);o=Z(p,n[0]),p.forEach(h),t=D(i),r=T(i,"BUTTON",{class:!0,"aria-label":!0});var m=O(r);q(l.$$.fragment,m),m.forEach(h),i.forEach(h),this.h()},h(){y(s,"class","svelte-2pd0x1"),y(r,"class","icon svelte-2pd0x1"),y(r,"aria-label","about"),y(e,"class","svelte-2pd0x1")},m(u,i){v(u,e,i),E(e,s),E(s,o),E(e,t),E(e,r),K(l,r,null),a=!0},p(u,[i]){(!a||i&1)&&ee(o,u[0])},i(u){a||($(l.$$.fragment,u),a=!0)},o(u){P(l.$$.fragment,u),a=!1},d(u){u&&h(e),L(l)}}}function at(n,e,s){let{text:o}=e;return n.$$set=t=>{"text"in t&&s(0,o=t.text)},[o]}class it extends X{constructor(e){super(),Y(this,e,at,lt,W,{text:0})}}function de(n,e,s){const o=n.slice();return o[1]=e[s].text,o[2]=e[s].mark,o}function _e(n,e,s){const o=n.slice();o[5]=e[s];const t=o[5]===":";return o[6]=t,o}function ft(n){let e,s=n[1]+"",o;return{c(){e=N("span"),o=Q(s),this.h()},l(t){e=T(t,"SPAN",{class:!0});var r=O(e);o=Z(r,s),r.forEach(h),this.h()},h(){y(e,"class","svelte-jw2tih")},m(t,r){v(t,e,r),E(e,o)},p(t,r){r&1&&s!==(s=t[1]+"")&&ee(o,s)},d(t){t&&h(e)}}}function ut(n){let e,s,o=x(n[1]),t=[];for(let r=0;r<o.length;r+=1)t[r]=pe(_e(n,o,r));return{c(){e=N("mark");for(let r=0;r<t.length;r+=1)t[r].c();s=F(),this.h()},l(r){e=T(r,"MARK",{class:!0});var l=O(e);for(let a=0;a<t.length;a+=1)t[a].l(l);s=D(l),l.forEach(h),this.h()},h(){y(e,"class","svelte-jw2tih")},m(r,l){v(r,e,l);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null);E(e,s)},p(r,l){if(l&1){o=x(r[1]);let a;for(a=0;a<o.length;a+=1){const u=_e(r,o,a);t[a]?t[a].p(u,l):(t[a]=pe(u),t[a].c(),t[a].m(e,s))}for(;a<t.length;a+=1)t[a].d(1);t.length=o.length}},d(r){r&&h(e),be(t,r)}}}function pe(n){let e,s=n[5]+"",o;return{c(){e=N("span"),o=Q(s),this.h()},l(t){e=T(t,"SPAN",{class:!0});var r=O(e);o=Z(r,s),r.forEach(h),this.h()},h(){y(e,"class","svelte-jw2tih"),fe(e,"colon",n[6])},m(t,r){v(t,e,r),E(e,o)},p(t,r){r&1&&s!==(s=t[5]+"")&&ee(o,s),r&1&&fe(e,"colon",t[6])},d(t){t&&h(e)}}}function he(n){let e;function s(r,l){return r[2]?ut:ft}let o=s(n),t=o(n);return{c(){t.c(),e=ie()},l(r){t.l(r),e=ie()},m(r,l){t.m(r,l),v(r,e,l)},p(r,l){o===(o=s(r))&&t?t.p(r,l):(t.d(1),t=o(r),t&&(t.c(),t.m(e.parentNode,e)))},d(r){r&&h(e),t.d(r)}}}function ct(n){let e,s=x(n[0]),o=[];for(let t=0;t<s.length;t+=1)o[t]=he(de(n,s,t));return{c(){e=N("p");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){e=T(t,"P",{class:!0});var r=O(e);for(let l=0;l<o.length;l+=1)o[l].l(r);r.forEach(h),this.h()},h(){y(e,"class","svelte-jw2tih")},m(t,r){v(t,e,r);for(let l=0;l<o.length;l+=1)o[l]&&o[l].m(e,null)},p(t,[r]){if(r&1){s=x(t[0]);let l;for(l=0;l<s.length;l+=1){const a=de(t,s,l);o[l]?o[l].p(a,r):(o[l]=he(a),o[l].c(),o[l].m(e,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}},i:G,o:G,d(t){t&&h(e),be(o,t)}}}function dt(n,e,s){let{data:o}=e;return n.$$set=t=>{"data"in t&&s(0,o=t.data)},[o]}class _t extends X{constructor(e){super(),Y(this,e,dt,ct,W,{data:0})}}function me(n){return Object.prototype.toString.call(n)==="[object Date]"}function se(n,e){if(n===e||n!==n)return()=>n;const s=typeof n;if(s!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const o=e.map((t,r)=>se(n[r],t));return t=>o.map(r=>r(t))}if(s==="object"){if(!n||!e)throw new Error("Object cannot be null");if(me(n)&&me(e)){n=n.getTime(),e=e.getTime();const r=e-n;return l=>new Date(n+l*r)}const o=Object.keys(e),t={};return o.forEach(r=>{t[r]=se(n[r],e[r])}),r=>{const l={};return o.forEach(a=>{l[a]=t[a](r)}),l}}if(s==="number"){const o=e-n;return t=>n+t*o}throw new Error(`Cannot interpolate ${s} values`)}function pt(n,e={}){const s=Xe(n);let o,t=n;function r(l,a){if(n==null)return s.set(n=l),Promise.resolve();t=l;let u=o,i=!1,{delay:p=0,duration:m=400,easing:g=$e,interpolate:_=se}=J(J({},e),a);if(m===0)return u&&(u.abort(),u=null),s.set(n=t),Promise.resolve();const d=Ye()+p;let c;return o=xe(C=>{if(C<d)return!0;i||(c=_(n,l),typeof m=="function"&&(m=m(n,l)),i=!0),u&&(u.abort(),u=null);const S=C-d;return S>m?(s.set(n=l),!1):(s.set(n=c(g(S/m))),!0)}),o.promise}return{set:r,update:(l,a)=>r(l(t,n),a),subscribe:s.subscribe}}const{isNaN:re}=et;function ht(n){let e,s,o=!1,t,r=!0,l,a;function u(){cancelAnimationFrame(t),e.paused||(t=le(u),o=!0),n[15].call(e)}return{c(){e=N("audio"),this.h()},l(i){e=T(i,"AUDIO",{src:!0,preload:!0}),O(e).forEach(h),this.h()},h(){ue(e.src,s=n[7])||y(e,"src",s),y(e,"preload",""),e.autoplay=!0,(n[0]===void 0||n[1]===void 0)&&ne(u),n[0]===void 0&&ne(()=>n[16].call(e)),n[4]===void 0&&ne(()=>n[19].call(e))},m(i,p){v(i,e,p),re(n[3])||(e.volume=n[3]),e.muted=n[6],n[20](e),l||(a=[B(e,"timeupdate",u),B(e,"ended",n[16]),B(e,"volumechange",n[17]),B(e,"play",n[18]),B(e,"pause",n[18]),B(e,"durationchange",n[19])],l=!0)},p(i,[p]){p&128&&!ue(e.src,s=i[7])&&y(e,"src",s),!o&&p&2&&!re(i[1])&&(e.currentTime=i[1]),o=!1,p&8&&!re(i[3])&&(e.volume=i[3]),p&64&&(e.muted=i[6]),p&32&&r!==(r=i[5])&&e[r?"pause":"play"]()},i:G,o:G,d(i){i&&h(e),n[20](null),l=!1,Me(a)}}}function mt(n,e,s){let o,t,r,{preview:l}=e,{ready:a}=e,u=new Date,i,p,m,g,_,d,c,C=!0;const S=je(),M=pt(0);ke(n,M,w=>s(14,r=w));const f=()=>{i&&(s(1,g=0),i.play(),s(3,m=1),console.log("fade in"),M.set(0),M.set(1,{duration:500}))};function b(w){c=!0,console.log("fade out",w),M.set(0,{duration:500}).then(()=>{c=!1,w&&i.pause()})}function A(){c||d===!1&&t===59&&b(!0)}function R(){if(c||isNaN(_))return;const w=_-g<1;d===!1&&w&&b()}Pe(()=>{setInterval(()=>{s(12,u=new Date)},500),s(9,a=!0)});function k(){p=this.ended,g=this.currentTime,s(0,p),s(1,g)}function j(){p=this.ended,s(0,p)}function I(){m=this.volume,C=this.muted,s(3,m),s(14,r),s(6,C)}function z(){d=this.paused,s(5,d)}function H(){_=this.duration,s(4,_)}function te(w){oe[w?"unshift":"push"](()=>{i=w,s(2,i)})}return n.$$set=w=>{"preview"in w&&s(10,l=w.preview),"ready"in w&&s(9,a=w.ready)},n.$$.update=()=>{n.$$.dirty&1024&&s(7,o=l),n.$$.dirty&1&&p&&S("ended"),n.$$.dirty&4096&&s(13,t=u.getSeconds()),n.$$.dirty&8192&&A(),n.$$.dirty&2&&R(),n.$$.dirty&16384&&s(3,m=r)},[p,g,i,m,_,d,C,o,M,a,l,f,u,t,r,k,j,I,z,H,te]}class gt extends X{constructor(e){super(),Y(this,e,mt,ht,W,{preview:10,ready:9,play:11})}get play(){return this.$$.ctx[11]}}const yt=`
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
  <path fill="#000" d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8Z"/>
  <path fill="#fff" d="M406.6 231.1c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3zm-31 76.2c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm-26.9 65.6c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4z"/>
</svg>`;function ge(n){let e,s,o="Turn Sound On",t,r;return{c(){e=N("p"),s=N("button"),s.textContent=o,this.h()},l(l){e=T(l,"P",{class:!0});var a=O(e);s=T(a,"BUTTON",{"data-svelte-h":!0}),He(s)!=="svelte-120u7t9"&&(s.textContent=o),a.forEach(h),this.h()},h(){y(e,"class","svelte-rkst0")},m(l,a){v(l,e,a),E(e,s),t||(r=B(s,"click",function(){Be(n[2].play)&&n[2].play.apply(this,arguments)}),t=!0)},p(l,a){n=l},d(l){l&&h(e),t=!1,r()}}}function ye(n){let e,s,o,t,r,l=n[0].artist+"",a,u,i,p,m,g;return s=new _t({props:{data:n[3]}}),{c(){e=N("div"),U(s.$$.fragment),o=F(),t=N("p"),r=Q("By "),a=Q(l),u=F(),i=N("a"),p=new Ie(!1),this.h()},l(_){e=T(_,"DIV",{class:!0});var d=O(e);q(s.$$.fragment,d),d.forEach(h),o=D(_),t=T(_,"P",{class:!0});var c=O(t);r=Z(c,"By "),a=Z(c,l),u=D(c),i=T(c,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,class:!0});var C=O(i);p=ze(C,!1),C.forEach(h),c.forEach(h),this.h()},h(){y(e,"class","clock"),p.a=null,y(i,"href",m=n[0].href),y(i,"target","_blank"),y(i,"rel","noreferrer"),y(i,"aria-label","Spotify"),y(i,"class","svelte-rkst0"),y(t,"class","artist svelte-rkst0")},m(_,d){v(_,e,d),K(s,e,null),v(_,o,d),v(_,t,d),E(t,r),E(t,a),E(t,u),E(t,i),p.m(yt,i),g=!0},p(_,d){const c={};d&8&&(c.data=_[3]),s.$set(c),(!g||d&1)&&l!==(l=_[0].artist+"")&&ee(a,l),(!g||d&1&&m!==(m=_[0].href))&&y(i,"href",m)},i(_){g||($(s.$$.fragment,_),g=!0)},o(_){P(s.$$.fragment,_),g=!1},d(_){_&&(h(e),h(o),h(t)),L(s)}}}function bt(n){var M;let e,s,o,t,r,l,a,u,i,p,m,g,_;e=new Ve({props:{title:n[5],description:n[6],url:n[7],preloadFont:n[4],keywords:n[8]}}),o=new We({});let d=n[1]&&ge(n),c=n[0]&&ye(n);function C(f){n[13](f)}let S={src:(M=n[0])==null?void 0:M.preview_url};return n[1]!==void 0&&(S.ready=n[1]),i=new gt({props:S}),oe.push(()=>Ue(i,"ready",C)),n[14](i),i.$on("ended",n[15]),g=new it({props:{text:"a clock where the time appears in a song title"}}),{c(){U(e.$$.fragment),s=F(),U(o.$$.fragment),t=F(),r=N("div"),l=N("section"),d&&d.c(),a=F(),c&&c.c(),u=F(),U(i.$$.fragment),m=F(),U(g.$$.fragment),this.h()},l(f){q(e.$$.fragment,f),s=D(f),q(o.$$.fragment,f),t=D(f),r=T(f,"DIV",{class:!0});var b=O(r);l=T(b,"SECTION",{class:!0});var A=O(l);d&&d.l(A),a=D(A),c&&c.l(A),u=D(A),q(i.$$.fragment,A),A.forEach(h),b.forEach(h),m=D(f),q(g.$$.fragment,f),this.h()},h(){y(l,"class","svelte-rkst0"),y(r,"class","container svelte-rkst0")},m(f,b){K(e,f,b),v(f,s,b),K(o,f,b),v(f,t,b),v(f,r,b),E(r,l),d&&d.m(l,null),E(l,a),c&&c.m(l,null),E(l,u),K(i,l,null),v(f,m,b),K(g,f,b),_=!0},p(f,[b]){var R;f[1]?d?d.p(f,b):(d=ge(f),d.c(),d.m(l,a)):d&&(d.d(1),d=null),f[0]?c?(c.p(f,b),b&1&&$(c,1)):(c=ye(f),c.c(),$(c,1),c.m(l,u)):c&&(Ke(),P(c,1,1,()=>{c=null}),qe());const A={};b&1&&(A.src=(R=f[0])==null?void 0:R.preview_url),!p&&b&2&&(p=!0,A.ready=f[1],Fe(()=>p=!1)),i.$set(A)},i(f){_||($(e.$$.fragment,f),$(o.$$.fragment,f),$(c),$(i.$$.fragment,f),$(g.$$.fragment,f),_=!0)},o(f){P(e.$$.fragment,f),P(o.$$.fragment,f),P(c),P(i.$$.fragment,f),P(g.$$.fragment,f),_=!1},d(f){f&&(h(s),h(t),h(r),h(m)),L(e,f),L(o,f),d&&d.d(),c&&c.d(),n[14](null),L(i),L(g,f)}}}function kt(n,e,s){let o,t,r;ke(n,Re,k=>s(12,r=k)),Ge();let l,a,u,i;const p=["https://pudding.cool/assets/fonts/rubik/rubik-v14-latin-regular.woff2","https://pudding.cool/assets/fonts/rubik/rubik-v14-latin-700.woff2","https://pudding.cool/assets/fonts/rubik/rubik-v14-latin-900.woff2"],{title:m,description:g,url:_,keywords:d}=ce;De("copy",ce);function c(k){if(!k)return;const j=k.toLowerCase(),I=o,z=j.indexOf(I),H=z+I.length,te=k.slice(0,z),w=k.slice(z,H),Ee=w.split(":")[0],Ne=w.split(":")[1],Te=k.slice(H);return[{text:te},{mark:!0,text:[Ee,":",Ne]},{text:Te}]}function C(){s(0,a={name:o,artist:"No Track Found",href:""}),audioEl&&(audioEl.pause(),audioEl.currentTime=0)}function S(){const k=l.filter(j=>j.time===o);if(!k.length)C();else{const j=k.filter(H=>H.probably_time==="true").length>1,I=k.filter(H=>j?H.probably_time==="true":!0),z=Math.floor(Math.random()*I.length);a==null||a.id,s(0,a={...I[z]}),u.play()}}function M(){S()}async function f(){const k=await Le("../assets/tracks.csv");s(10,l=k.map(j=>({...j,popularity:+j.popularity})))}function b(k){i=k,s(1,i)}function A(k){oe[k?"unshift":"push"](()=>{u=k,s(2,u)})}const R=()=>S();return n.$$.update=()=>{n.$$.dirty&4096&&s(11,o=r.time),n.$$.dirty&4096&&r.period,n.$$.dirty&3074&&l&&i&&M(),n.$$.dirty&1&&s(3,t=c(a==null?void 0:a.name))},f(),[a,i,u,t,p,m,g,_,d,S,l,o,r,b,A,R]}class Ot extends X{constructor(e){super(),Y(this,e,kt,bt,W,{})}}export{Ot as component};
