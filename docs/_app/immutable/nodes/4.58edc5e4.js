import{v as I,s as J,f as $,l as F,g as A,h as T,m as S,d as h,j as v,i as y,u as b,n as q,D as ge,e as re,a as C,c as P,F as se,G as le,I as Ne,J as ie,K as Y,L as j,M as Te,N as Ce,o as Pe,p as ke,A as De,C as Me,B as Fe}from"../chunks/scheduler.4c2085d6.js";import{S as R,i as V,b as z,d as K,m as U,a as N,t as M,c as oe,e as W,g as ae}from"../chunks/index.3764b306.js";import{c as Se,a as Oe}from"../chunks/clock.6996aad5.js";import{e as H,M as je,W as Ie,v as Be,c as fe}from"../chunks/version.0d014b85.js";import{w as Le}from"../chunks/index.36f0bf5b.js";const ye=typeof window<"u";let qe=ye?()=>window.performance.now():()=>Date.now(),x=ye?n=>requestAnimationFrame(n):I;const L=new Set;function we(n){L.forEach(e=>{e.c(n)||(L.delete(e),e.f())}),L.size!==0&&x(we)}function ze(n){let e;return L.size===0&&x(we),{promise:new Promise(l=>{L.add(e={c:n,f:l})}),abort(){L.delete(e)}}}function Ke(n){let e,l;return{c(){e=$("h1"),l=F(n[0]),this.h()},l(s){e=A(s,"H1",{class:!0});var t=T(e);l=S(t,n[0]),t.forEach(h),this.h()},h(){v(e,"class","svelte-1n03xsw")},m(s,t){y(s,e,t),b(e,l)},p(s,[t]){t&1&&q(l,s[0])},i:I,o:I,d(s){s&&h(e)}}}function Ue(n,e,l){let{text:s}=e;return n.$$set=t=>{"text"in t&&l(0,s=t.text)},[s]}class We extends R{constructor(e){super(),V(this,e,Ue,Ke,J,{text:0})}}function ue(n,e,l){const s=n.slice();return s[1]=e[l].text,s[2]=e[l].mark,s}function ce(n,e,l){const s=n.slice();s[5]=e[l];const t=s[5]===":";return s[6]=t,s}function Ge(n){let e,l=n[1]+"",s;return{c(){e=$("span"),s=F(l),this.h()},l(t){e=A(t,"SPAN",{class:!0});var r=T(e);s=S(r,l),r.forEach(h),this.h()},h(){v(e,"class","svelte-4nvwp7")},m(t,r){y(t,e,r),b(e,s)},p(t,r){r&1&&l!==(l=t[1]+"")&&q(s,l)},d(t){t&&h(e)}}}function He(n){let e,l,s=H(n[1]),t=[];for(let r=0;r<s.length;r+=1)t[r]=pe(ce(n,s,r));return{c(){e=$("mark");for(let r=0;r<t.length;r+=1)t[r].c();l=C(),this.h()},l(r){e=A(r,"MARK",{class:!0});var i=T(e);for(let o=0;o<t.length;o+=1)t[o].l(i);l=P(i),i.forEach(h),this.h()},h(){v(e,"class","svelte-4nvwp7")},m(r,i){y(r,e,i);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);b(e,l)},p(r,i){if(i&1){s=H(r[1]);let o;for(o=0;o<s.length;o+=1){const u=ce(r,s,o);t[o]?t[o].p(u,i):(t[o]=pe(u),t[o].c(),t[o].m(e,l))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}},d(r){r&&h(e),ge(t,r)}}}function pe(n){let e,l=n[5]+"",s;return{c(){e=$("span"),s=F(l),this.h()},l(t){e=A(t,"SPAN",{class:!0});var r=T(e);s=S(r,l),r.forEach(h),this.h()},h(){v(e,"class","svelte-4nvwp7"),se(e,"colon",n[6])},m(t,r){y(t,e,r),b(e,s)},p(t,r){r&1&&l!==(l=t[5]+"")&&q(s,l),r&1&&se(e,"colon",t[6])},d(t){t&&h(e)}}}function _e(n){let e;function l(r,i){return r[2]?He:Ge}let s=l(n),t=s(n);return{c(){t.c(),e=re()},l(r){t.l(r),e=re()},m(r,i){t.m(r,i),y(r,e,i)},p(r,i){s===(s=l(r))&&t?t.p(r,i):(t.d(1),t=s(r),t&&(t.c(),t.m(e.parentNode,e)))},d(r){r&&h(e),t.d(r)}}}function Je(n){let e,l=H(n[0]),s=[];for(let t=0;t<l.length;t+=1)s[t]=_e(ue(n,l,t));return{c(){e=$("p");for(let t=0;t<s.length;t+=1)s[t].c();this.h()},l(t){e=A(t,"P",{class:!0});var r=T(e);for(let i=0;i<s.length;i+=1)s[i].l(r);r.forEach(h),this.h()},h(){v(e,"class","svelte-4nvwp7")},m(t,r){y(t,e,r);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(t,[r]){if(r&1){l=H(t[0]);let i;for(i=0;i<l.length;i+=1){const o=ue(t,l,i);s[i]?s[i].p(o,r):(s[i]=_e(o),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=l.length}},i:I,o:I,d(t){t&&h(e),ge(s,t)}}}function Re(n,e,l){let{data:s}=e;return n.$$set=t=>{"data"in t&&l(0,s=t.data)},[s]}class Ve extends R{constructor(e){super(),V(this,e,Re,Je,J,{data:0})}}function de(n){return Object.prototype.toString.call(n)==="[object Date]"}function Z(n,e){if(n===e||n!==n)return()=>n;const l=typeof n;if(l!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const s=e.map((t,r)=>Z(n[r],t));return t=>s.map(r=>r(t))}if(l==="object"){if(!n||!e)throw new Error("Object cannot be null");if(de(n)&&de(e)){n=n.getTime(),e=e.getTime();const r=e-n;return i=>new Date(n+i*r)}const s=Object.keys(e),t={};return s.forEach(r=>{t[r]=Z(n[r],e[r])}),r=>{const i={};return s.forEach(o=>{i[o]=t[o](r)}),i}}if(l==="number"){const s=e-n;return t=>n+t*s}throw new Error(`Cannot interpolate ${l} values`)}function Qe(n,e={}){const l=Le(n);let s,t=n;function r(i,o){if(n==null)return l.set(n=i),Promise.resolve();t=i;let u=s,f=!1,{delay:c=0,duration:d=400,easing:k=Ne,interpolate:m=Z}=le(le({},e),o);if(d===0)return u&&(u.abort(),u=null),l.set(n=t),Promise.resolve();const p=qe()+c;let _;return s=ze(E=>{if(E<p)return!0;f||(_=m(n,i),typeof d=="function"&&(d=d(n,i)),f=!0),u&&(u.abort(),u=null);const a=E-p;return a>d?(l.set(n=i),!1):(l.set(n=_(k(a/d))),!0)}),s.promise}return{set:r,update:(i,o)=>r(i(t,n),o),subscribe:l.subscribe}}function Xe(n){let e,l,s=!1,t,r=!0,i,o;function u(){cancelAnimationFrame(t),e.paused||(t=x(u),s=!0),n[10].call(e)}return{c(){e=$("audio"),this.h()},l(f){e=A(f,"AUDIO",{src:!0,preload:!0}),T(e).forEach(h),this.h()},h(){ie(e.src,l=n[0])||v(e,"src",l),v(e,"preload",""),e.autoplay=!0,(n[1]===void 0||n[4]===void 0)&&Y(u),n[1]===void 0&&Y(()=>n[11].call(e)),n[5]===void 0&&Y(()=>n[14].call(e))},m(f,c){y(f,e,c),isNaN(n[3])||(e.volume=n[3]),e.muted=n[6],n[15](e),i||(o=[j(e,"timeupdate",u),j(e,"ended",n[11]),j(e,"volumechange",n[12]),j(e,"play",n[13]),j(e,"pause",n[13]),j(e,"durationchange",n[14])],i=!0)},p(f,[c]){c&1&&!ie(e.src,l=f[0])&&v(e,"src",l),!s&&c&16&&!isNaN(f[4])&&(e.currentTime=f[4]),s=!1,c&8&&!isNaN(f[3])&&(e.volume=f[3]),c&64&&(e.muted=f[6]),c&128&&r!==(r=f[7])&&e[r?"pause":"play"]()},i:I,o:I,d(f){f&&h(e),n[15](null),i=!1,Te(o)}}}function Ye(n,e,l){let{src:s}=e,t=new Date,r,i,o,u,f,c,d;const k=Ce(),m=Qe(0),p=()=>{r&&(l(4,u=0),r.play(),l(3,o=1),m.set(1,{duration:500}))};Pe(()=>{setInterval(()=>{l(9,t=new Date)},500)});function _(){i=this.ended,u=this.currentTime,l(1,i),l(4,u)}function E(){i=this.ended,l(1,i)}function a(){o=this.volume,c=this.muted,l(3,o),l(6,c)}function g(){d=this.paused,l(7,d)}function B(){f=this.duration,l(5,f)}function Q(O){ke[O?"unshift":"push"](()=>{r=O,l(2,r)})}return n.$$set=O=>{"src"in O&&l(0,s=O.src)},n.$$.update=()=>{n.$$.dirty&2&&i&&k("ended"),n.$$.dirty&512&&t.getSeconds()},[s,i,r,o,u,f,c,d,p,t,_,E,a,g,B,Q]}class Ze extends R{constructor(e){super(),V(this,e,Ye,Xe,J,{src:0,play:8})}get play(){return this.$$.ctx[8]}}function me(n){let e,l,s,t,r,i=n[0].artist+"",o,u,f,c,d,k;return l=new Ve({props:{data:n[3]}}),{c(){e=$("div"),z(l.$$.fragment),s=C(),t=$("p"),r=F("By "),o=F(i),u=C(),f=$("a"),c=F("link"),this.h()},l(m){e=A(m,"DIV",{class:!0});var p=T(e);K(l.$$.fragment,p),p.forEach(h),s=P(m),t=A(m,"P",{class:!0});var _=T(t);r=S(_,"By "),o=S(_,i),u=P(_),f=A(_,"A",{href:!0,target:!0,rel:!0});var E=T(f);c=S(E,"link"),E.forEach(h),_.forEach(h),this.h()},h(){v(e,"class","clock"),v(f,"href",d=n[0].href),v(f,"target","_blank"),v(f,"rel","noreferrer"),v(t,"class","artist svelte-1f29337")},m(m,p){y(m,e,p),U(l,e,null),y(m,s,p),y(m,t,p),b(t,r),b(t,o),b(t,u),b(t,f),b(f,c),k=!0},p(m,p){const _={};p&8&&(_.data=m[3]),l.$set(_),(!k||p&1)&&i!==(i=m[0].artist+"")&&q(o,i),(!k||p&1&&d!==(d=m[0].href))&&v(f,"href",d)},i(m){k||(N(l.$$.fragment,m),k=!0)},o(m){M(l.$$.fragment,m),k=!1},d(m){m&&(h(e),h(s),h(t)),W(l)}}}function he(n){let e,l,s="Enable Audio",t,r,i,o,u,f={src:n[0].preview_url};return r=new Ze({props:f}),n[14](r),r.$on("ended",n[15]),{c(){e=$("p"),l=$("button"),l.textContent=s,t=C(),z(r.$$.fragment),this.h()},l(c){e=A(c,"P",{class:!0});var d=T(e);l=A(d,"BUTTON",{"data-svelte-h":!0}),Fe(l)!=="svelte-1sl3zi7"&&(l.textContent=s),d.forEach(h),t=P(c),K(r.$$.fragment,c),this.h()},h(){v(e,"class","svelte-1f29337")},m(c,d){y(c,e,d),b(e,l),y(c,t,d),U(r,c,d),i=!0,o||(u=j(l,"click",n[11]),o=!0)},p(c,d){const k={};d&1&&(k.src=c[0].preview_url),r.$set(k)},i(c){i||(N(r.$$.fragment,c),i=!0)},o(c){M(r.$$.fragment,c),i=!1},d(c){c&&(h(e),h(t)),n[14](null),W(r,c),o=!1,u()}}}function xe(n){var E;let e,l,s,t,r,i,o,u,f,c,d,k,m;e=new je({props:{title:n[6],description:n[7],url:n[8],preloadFont:n[5],keywords:n[9]}}),s=new Ie({}),r=new We({props:{text:"a clock where the time appears in a song title"}});let p=n[0]&&me(n),_=((E=n[0])==null?void 0:E.preview_url)&&he(n);return{c(){z(e.$$.fragment),l=C(),z(s.$$.fragment),t=C(),z(r.$$.fragment),i=C(),p&&p.c(),o=C(),_&&_.c(),u=C(),f=$("time"),c=F(n[1]),d=C(),k=F(n[4]),this.h()},l(a){K(e.$$.fragment,a),l=P(a),K(s.$$.fragment,a),t=P(a),K(r.$$.fragment,a),i=P(a),p&&p.l(a),o=P(a),_&&_.l(a),u=P(a),f=A(a,"TIME",{class:!0});var g=T(f);c=S(g,n[1]),d=P(g),k=S(g,n[4]),g.forEach(h),this.h()},h(){v(f,"class","svelte-1f29337")},m(a,g){U(e,a,g),y(a,l,g),U(s,a,g),y(a,t,g),U(r,a,g),y(a,i,g),p&&p.m(a,g),y(a,o,g),_&&_.m(a,g),y(a,u,g),y(a,f,g),b(f,c),b(f,d),b(f,k),m=!0},p(a,[g]){var B;a[0]?p?(p.p(a,g),g&1&&N(p,1)):(p=me(a),p.c(),N(p,1),p.m(o.parentNode,o)):p&&(ae(),M(p,1,1,()=>{p=null}),oe()),(B=a[0])!=null&&B.preview_url?_?(_.p(a,g),g&1&&N(_,1)):(_=he(a),_.c(),N(_,1),_.m(u.parentNode,u)):_&&(ae(),M(_,1,1,()=>{_=null}),oe()),(!m||g&2)&&q(c,a[1]),(!m||g&16)&&q(k,a[4])},i(a){m||(N(e.$$.fragment,a),N(s.$$.fragment,a),N(r.$$.fragment,a),N(p),N(_),m=!0)},o(a){M(e.$$.fragment,a),M(s.$$.fragment,a),M(r.$$.fragment,a),M(p),M(_),m=!1},d(a){a&&(h(l),h(t),h(i),h(o),h(u),h(f)),W(e,a),W(s,a),W(r,a),p&&p.d(a),_&&_.d(a)}}}function et(n,e,l){let s,t,r,i;De(n,Oe,w=>l(13,i=w)),Be();let o,u,f;const c=[],{title:d,description:k,url:m,keywords:p}=fe;Me("copy",fe);function _(w){if(!w)return;const D=w.toLowerCase(),G=t.toLowerCase(),ee=D.indexOf(`${s} ${G}`)>-1?`${s} ${G}`:s,X=D.indexOf(ee),te=X+ee.length,be=w.slice(0,X),ne=w.slice(X,te),Ee=ne.split(":")[0],$e=ne.split(":")[1],Ae=w.slice(te);return[{text:be},{mark:!0,text:[Ee,":",$e]},{text:Ae}]}function E(){l(0,u={name:s,artist:"No Track Found",href:""}),audioEl&&(audioEl.pause(),audioEl.currentTime=0)}function a(){const w=o.filter(D=>D.time===s);if(!w.length)E();else{const D=Math.floor(Math.random()*w.length),G=u==null?void 0:u.id;l(0,u={...w[D]}),G===u.id&&f.play()}}function g(){a()}async function B(){const w=await Se("../assets/tracks.csv");l(12,o=w.map(D=>({...D,popularity:+D.popularity})))}function Q(){f.play()}function O(w){ke[w?"unshift":"push"](()=>{f=w,l(2,f)})}const ve=()=>a();return n.$$.update=()=>{n.$$.dirty&8192&&l(1,s=i.time),n.$$.dirty&8192&&l(4,t=i.period),n.$$.dirty&4098&&o&&g(),n.$$.dirty&1&&l(3,r=_(u==null?void 0:u.name))},B(),[u,s,f,r,t,c,d,k,m,p,a,Q,o,i,O,ve]}class at extends R{constructor(e){super(),V(this,e,et,xe,J,{})}}export{at as component};
