import{y as G,s as W,E as J,F as de,r as Se,u as je,v as Pe,w as Fe,f as T,l as Q,a as F,g as M,h as C,m as Z,d as m,c as D,j as b,i as E,x as N,n as te,C as Ne,e as pe,G as _e,H as De,I as he,J as ie,K as B,L as He,z as x,M as Ie,o as ze,p as ce,N as Be,B as $e,A as Ue,O as qe,P as Ke,Q as Le}from"../chunks/scheduler.ab5e122d.js";import{S as X,i as Y,b as $,d as U,m as q,a as S,t as P,e as K,f as Re,c as Ve,g as Ge}from"../chunks/index.e35f7b0f.js";import{c as Je,a as Qe}from"../chunks/clock.c7ee0e7d.js";import{e as ee,M as Ze,v as We,c as me}from"../chunks/version.19f3f603.js";import{I as Xe,g as Ye,a as xe,i as ae,H as et}from"../chunks/Header.2cda8f9c.js";import{w as tt}from"../chunks/index.26e4be98.js";const Te=typeof window<"u";let nt=Te?()=>window.performance.now():()=>Date.now(),ue=Te?n=>requestAnimationFrame(n):G;const V=new Set;function Me(n){V.forEach(e=>{e.c(n)||(V.delete(e),e.f())}),V.size!==0&&ue(Me)}function rt(n){let e;return V.size===0&&ue(Me),{promise:new Promise(s=>{V.add(e={c:n,f:s})}),abort(){V.delete(e)}}}const st=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ot(n){let e;const s=n[2].default,o=Se(s,n,n[3],null);return{c(){o&&o.c()},l(t){o&&o.l(t)},m(t,r){o&&o.m(t,r),e=!0},p(t,r){o&&o.p&&(!e||r&8)&&je(o,s,t,t[3],e?Fe(s,t[3],r,null):Pe(t[3]),null)},i(t){e||(S(o,t),e=!0)},o(t){P(o,t),e=!1},d(t){o&&o.d(t)}}}function it(n){let e,s;const o=[{name:"help-circle"},n[1],{iconNode:n[0]}];let t={$$slots:{default:[ot]},$$scope:{ctx:n}};for(let r=0;r<o.length;r+=1)t=J(t,o[r]);return e=new Xe({props:t}),{c(){$(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,i){q(e,r,i),s=!0},p(r,[i]){const l=i&3?Ye(o,[o[0],i&2&&xe(r[1]),i&1&&{iconNode:r[0]}]):{};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){s||(S(e.$$.fragment,r),s=!0)},o(r){P(e.$$.fragment,r),s=!1},d(r){K(e,r)}}}function lt(n,e,s){let{$$slots:o={},$$scope:t}=e;const r=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}],["path",{d:"M12 17h.01"}]];return n.$$set=i=>{s(1,e=J(J({},e),de(i))),"$$scope"in i&&s(3,t=i.$$scope)},e=de(e),[r,e,o,t]}class at extends X{constructor(e){super(),Y(this,e,lt,it,W,{})}}const ft=at;function ct(n){let e,s,o,t,r,i,l;return i=new ft({props:{size:"28"}}),{c(){e=T("footer"),s=T("h1"),o=Q(n[0]),t=F(),r=T("button"),$(i.$$.fragment),this.h()},l(c){e=M(c,"FOOTER",{class:!0});var a=C(e);s=M(a,"H1",{class:!0});var p=C(s);o=Z(p,n[0]),p.forEach(m),t=D(a),r=M(a,"BUTTON",{class:!0,"aria-label":!0});var h=C(r);U(i.$$.fragment,h),h.forEach(m),a.forEach(m),this.h()},h(){b(s,"class","svelte-2pd0x1"),b(r,"class","icon svelte-2pd0x1"),b(r,"aria-label","about"),b(e,"class","svelte-2pd0x1")},m(c,a){E(c,e,a),N(e,s),N(s,o),N(e,t),N(e,r),q(i,r,null),l=!0},p(c,[a]){(!l||a&1)&&te(o,c[0])},i(c){l||(S(i.$$.fragment,c),l=!0)},o(c){P(i.$$.fragment,c),l=!1},d(c){c&&m(e),K(i)}}}function ut(n,e,s){let{text:o}=e;return n.$$set=t=>{"text"in t&&s(0,o=t.text)},[o]}class dt extends X{constructor(e){super(),Y(this,e,ut,ct,W,{text:0})}}function ge(n,e,s){const o=n.slice();return o[1]=e[s].text,o[2]=e[s].mark,o}function ye(n,e,s){const o=n.slice();o[5]=e[s];const t=o[5]===":";return o[6]=t,o}function pt(n){let e,s=n[1]+"",o;return{c(){e=T("span"),o=Q(s),this.h()},l(t){e=M(t,"SPAN",{class:!0});var r=C(e);o=Z(r,s),r.forEach(m),this.h()},h(){b(e,"class","svelte-jw2tih")},m(t,r){E(t,e,r),N(e,o)},p(t,r){r&1&&s!==(s=t[1]+"")&&te(o,s)},d(t){t&&m(e)}}}function _t(n){let e,s,o=ee(n[1]),t=[];for(let r=0;r<o.length;r+=1)t[r]=be(ye(n,o,r));return{c(){e=T("mark");for(let r=0;r<t.length;r+=1)t[r].c();s=F(),this.h()},l(r){e=M(r,"MARK",{class:!0});var i=C(e);for(let l=0;l<t.length;l+=1)t[l].l(i);s=D(i),i.forEach(m),this.h()},h(){b(e,"class","svelte-jw2tih")},m(r,i){E(r,e,i);for(let l=0;l<t.length;l+=1)t[l]&&t[l].m(e,null);N(e,s)},p(r,i){if(i&1){o=ee(r[1]);let l;for(l=0;l<o.length;l+=1){const c=ye(r,o,l);t[l]?t[l].p(c,i):(t[l]=be(c),t[l].c(),t[l].m(e,s))}for(;l<t.length;l+=1)t[l].d(1);t.length=o.length}},d(r){r&&m(e),Ne(t,r)}}}function be(n){let e,s=n[5]+"",o;return{c(){e=T("span"),o=Q(s),this.h()},l(t){e=M(t,"SPAN",{class:!0});var r=C(e);o=Z(r,s),r.forEach(m),this.h()},h(){b(e,"class","svelte-jw2tih"),_e(e,"colon",n[6])},m(t,r){E(t,e,r),N(e,o)},p(t,r){r&1&&s!==(s=t[5]+"")&&te(o,s),r&1&&_e(e,"colon",t[6])},d(t){t&&m(e)}}}function we(n){let e;function s(r,i){return r[2]?_t:pt}let o=s(n),t=o(n);return{c(){t.c(),e=pe()},l(r){t.l(r),e=pe()},m(r,i){t.m(r,i),E(r,e,i)},p(r,i){o===(o=s(r))&&t?t.p(r,i):(t.d(1),t=o(r),t&&(t.c(),t.m(e.parentNode,e)))},d(r){r&&m(e),t.d(r)}}}function ht(n){let e,s=ee(n[0]),o=[];for(let t=0;t<s.length;t+=1)o[t]=we(ge(n,s,t));return{c(){e=T("p");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){e=M(t,"P",{class:!0});var r=C(e);for(let i=0;i<o.length;i+=1)o[i].l(r);r.forEach(m),this.h()},h(){b(e,"class","svelte-jw2tih")},m(t,r){E(t,e,r);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(e,null)},p(t,[r]){if(r&1){s=ee(t[0]);let i;for(i=0;i<s.length;i+=1){const l=ge(t,s,i);o[i]?o[i].p(l,r):(o[i]=we(l),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},i:G,o:G,d(t){t&&m(e),Ne(o,t)}}}function mt(n,e,s){let{data:o}=e;return n.$$set=t=>{"data"in t&&s(0,o=t.data)},[o]}class gt extends X{constructor(e){super(),Y(this,e,mt,ht,W,{data:0})}}function ke(n){return Object.prototype.toString.call(n)==="[object Date]"}function fe(n,e){if(n===e||n!==n)return()=>n;const s=typeof n;if(s!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const o=e.map((t,r)=>fe(n[r],t));return t=>o.map(r=>r(t))}if(s==="object"){if(!n||!e)throw new Error("Object cannot be null");if(ke(n)&&ke(e)){n=n.getTime(),e=e.getTime();const r=e-n;return i=>new Date(n+i*r)}const o=Object.keys(e),t={};return o.forEach(r=>{t[r]=fe(n[r],e[r])}),r=>{const i={};return o.forEach(l=>{i[l]=t[l](r)}),i}}if(s==="number"){const o=e-n;return t=>n+t*o}throw new Error(`Cannot interpolate ${s} values`)}function yt(n,e={}){const s=tt(n);let o,t=n;function r(i,l){if(n==null)return s.set(n=i),Promise.resolve();t=i;let c=o,a=!1,{delay:p=0,duration:h=400,easing:g=De,interpolate:_=fe}=J(J({},e),l);if(h===0)return c&&(c.abort(),c=null),s.set(n=t),Promise.resolve();const d=nt()+p;let u;return o=rt(A=>{if(A<d)return!0;a||(u=_(n,i),typeof h=="function"&&(h=h(n,i)),a=!0),c&&(c.abort(),c=null);const O=A-d;return O>h?(s.set(n=i),!1):(s.set(n=u(g(O/h))),!0)}),o.promise}return{set:r,update:(i,l)=>r(i(t,n),l),subscribe:s.subscribe}}const{isNaN:le}=st;function bt(n){let e,s,o=!1,t,r=!0,i,l;function c(){cancelAnimationFrame(t),e.paused||(t=ue(c),o=!0),n[16].call(e)}return{c(){e=T("audio"),this.h()},l(a){e=M(a,"AUDIO",{src:!0,preload:!0}),C(e).forEach(m),this.h()},h(){he(e.src,s=n[2])||b(e,"src",s),b(e,"preload",""),e.autoplay=!0,(n[0]===void 0||n[1]===void 0)&&ie(c),n[0]===void 0&&ie(()=>n[17].call(e)),n[5]===void 0&&ie(()=>n[20].call(e))},m(a,p){E(a,e,p),le(n[4])||(e.volume=n[4]),e.muted=n[7],n[21](e),i||(l=[B(e,"timeupdate",c),B(e,"ended",n[17]),B(e,"volumechange",n[18]),B(e,"play",n[19]),B(e,"pause",n[19]),B(e,"durationchange",n[20])],i=!0)},p(a,[p]){p&4&&!he(e.src,s=a[2])&&b(e,"src",s),!o&&p&2&&!le(a[1])&&(e.currentTime=a[1]),o=!1,p&16&&!le(a[4])&&(e.volume=a[4]),p&128&&(e.muted=a[7]),p&64&&r!==(r=a[6])&&e[r?"pause":"play"]()},i:G,o:G,d(a){a&&m(e),n[21](null),i=!1,He(l)}}}function wt(n,e,s){let o,t,r;x(n,ae,k=>s(15,r=k));let{preview:i}=e,{ready:l}=e,c=new Date,a,p,h,g,_,d,u,A,O=!0;const L=Ie(),f=yt(0);x(n,f,k=>s(14,t=k));const w=()=>{p&&!O&&(s(1,_=0),p.play(),s(4,g=0),console.log("fade in"),f.set(0),f.set(1,{duration:500}))};function v(k){A=!0,console.log("fade out",k),f.set(0,{duration:500}).then(()=>{A=!1,k&&p.pause()})}function R(){A||u===!1&&o===59&&v(!0)}function ne(){if(A||isNaN(d))return;const k=d-_<1;u===!1&&k&&v()}function re(){i&&s(2,a=`https://p.scdn.co/mp3-preview/${i}?cid=635a94c846854eb29813825c79d704a2`)}function se(){s(7,O=r),u!==!1&&w()}ze(()=>{setInterval(()=>{s(12,c=new Date)},500),s(9,l=!0)});function y(){h=this.ended,_=this.currentTime,s(0,h),s(1,_)}function j(){h=this.ended,s(0,h)}function I(){g=this.volume,O=this.muted,s(4,g),s(14,t),s(7,O)}function z(){u=this.paused,s(6,u)}function H(){d=this.duration,s(5,d)}function oe(k){ce[k?"unshift":"push"](()=>{p=k,s(3,p)})}return n.$$set=k=>{"preview"in k&&s(10,i=k.preview),"ready"in k&&s(9,l=k.ready)},n.$$.update=()=>{n.$$.dirty&1024&&re(),n.$$.dirty&32768&&se(),n.$$.dirty&1&&h&&L("ended"),n.$$.dirty&4096&&s(13,o=c.getSeconds()),n.$$.dirty&8192&&R(),n.$$.dirty&2&&ne(),n.$$.dirty&16384&&s(4,g=t)},[h,_,a,p,g,d,u,O,f,l,i,w,c,o,t,r,y,j,I,z,H,oe]}class kt extends X{constructor(e){super(),Y(this,e,wt,bt,W,{preview:10,ready:9,play:11})}get play(){return this.$$.ctx[11]}}const vt=`
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512">
  <path fill="#000" d="M248 8C111.1 8 0 119.1 0 256s111.1 248 248 248 248-111.1 248-248S384.9 8 248 8Z"/>
  <path fill="#fff" d="M406.6 231.1c-5.2 0-8.4-1.3-12.9-3.9-71.2-42.5-198.5-52.7-280.9-29.7-3.6 1-8.1 2.6-12.9 2.6-13.2 0-23.3-10.3-23.3-23.6 0-13.6 8.4-21.3 17.4-23.9 35.2-10.3 74.6-15.2 117.5-15.2 73 0 149.5 15.2 205.4 47.8 7.8 4.5 12.9 10.7 12.9 22.6 0 13.6-11 23.3-23.2 23.3zm-31 76.2c-5.2 0-8.7-2.3-12.3-4.2-62.5-37-155.7-51.9-238.6-29.4-4.8 1.3-7.4 2.6-11.9 2.6-10.7 0-19.4-8.7-19.4-19.4s5.2-17.8 15.5-20.7c27.8-7.8 56.2-13.6 97.8-13.6 64.9 0 127.6 16.1 177 45.5 8.1 4.8 11.3 11 11.3 19.7-.1 10.8-8.5 19.5-19.4 19.5zm-26.9 65.6c-4.2 0-6.8-1.3-10.7-3.6-62.4-37.6-135-39.2-206.7-24.5-3.9 1-9 2.6-11.9 2.6-9.7 0-15.8-7.7-15.8-15.8 0-10.3 6.1-15.2 13.6-16.8 81.9-18.1 165.6-16.5 237 26.2 6.1 3.9 9.7 7.4 9.7 16.5s-7.1 15.4-15.2 15.4z"/>
</svg>`;function ve(n){let e,s,o="Turn Sound On",t,r;return{c(){e=T("p"),s=T("button"),s.textContent=o,this.h()},l(i){e=M(i,"P",{class:!0});var l=C(e);s=M(l,"BUTTON",{"data-svelte-h":!0}),Ue(s)!=="svelte-1umiux3"&&(s.textContent=o),l.forEach(m),this.h()},h(){b(e,"class","enable svelte-1oy0i4t")},m(i,l){E(i,e,l),N(e,s),t||(r=B(s,"click",n[15]),t=!0)},p:G,d(i){i&&m(e),t=!1,r()}}}function Ee(n){let e,s,o,t,r,i=n[0].artist+"",l,c,a,p,h,g;return s=new gt({props:{data:n[5]}}),{c(){e=T("div"),$(s.$$.fragment),o=F(),t=T("p"),r=Q("By "),l=Q(i),c=F(),a=T("a"),p=new qe(!1),this.h()},l(_){e=M(_,"DIV",{class:!0});var d=C(e);U(s.$$.fragment,d),d.forEach(m),o=D(_),t=M(_,"P",{class:!0});var u=C(t);r=Z(u,"By "),l=Z(u,i),c=D(u),a=M(u,"A",{href:!0,target:!0,rel:!0,"aria-label":!0,class:!0});var A=C(a);p=Ke(A,!1),A.forEach(m),u.forEach(m),this.h()},h(){b(e,"class","clock"),p.a=null,b(a,"href",h=`https://open.spotify.com/tracks/${n[0].id}`),b(a,"target","_blank"),b(a,"rel","noreferrer"),b(a,"aria-label","Spotify"),b(a,"class","svelte-1oy0i4t"),b(t,"class","artist svelte-1oy0i4t")},m(_,d){E(_,e,d),q(s,e,null),E(_,o,d),E(_,t,d),N(t,r),N(t,l),N(t,c),N(t,a),p.m(vt,a),g=!0},p(_,d){const u={};d&32&&(u.data=_[5]),s.$set(u),(!g||d&1)&&i!==(i=_[0].artist+"")&&te(l,i),(!g||d&1&&h!==(h=`https://open.spotify.com/tracks/${_[0].id}`))&&b(a,"href",h)},i(_){g||(S(s.$$.fragment,_),g=!0)},o(_){P(s.$$.fragment,_),g=!1},d(_){_&&(m(e),m(o),m(t)),K(s)}}}function Et(n){var L;let e,s,o,t,r,i,l,c,a,p,h,g,_;e=new Ze({props:{title:n[7],description:n[8],url:n[9],preloadFont:n[6],keywords:n[10]}}),o=new et({});let d=n[1]&&!n[4]&&ve(n),u=n[0]&&Ee(n);function A(f){n[16](f)}let O={preview:(L=n[0])==null?void 0:L.preview};return n[1]!==void 0&&(O.ready=n[1]),a=new kt({props:O}),ce.push(()=>Re(a,"ready",A)),n[17](a),a.$on("ended",n[18]),g=new dt({props:{text:"a clock where the time appears in a song title"}}),{c(){$(e.$$.fragment),s=F(),$(o.$$.fragment),t=F(),r=T("div"),i=T("section"),d&&d.c(),l=F(),u&&u.c(),c=F(),$(a.$$.fragment),h=F(),$(g.$$.fragment),this.h()},l(f){U(e.$$.fragment,f),s=D(f),U(o.$$.fragment,f),t=D(f),r=M(f,"DIV",{class:!0});var w=C(r);i=M(w,"SECTION",{class:!0});var v=C(i);d&&d.l(v),l=D(v),u&&u.l(v),c=D(v),U(a.$$.fragment,v),v.forEach(m),w.forEach(m),h=D(f),U(g.$$.fragment,f),this.h()},h(){b(i,"class","svelte-1oy0i4t"),b(r,"class","container svelte-1oy0i4t")},m(f,w){q(e,f,w),E(f,s,w),q(o,f,w),E(f,t,w),E(f,r,w),N(r,i),d&&d.m(i,null),N(i,l),u&&u.m(i,null),N(i,c),q(a,i,null),E(f,h,w),q(g,f,w),_=!0},p(f,[w]){var R;f[1]&&!f[4]?d?d.p(f,w):(d=ve(f),d.c(),d.m(i,l)):d&&(d.d(1),d=null),f[0]?u?(u.p(f,w),w&1&&S(u,1)):(u=Ee(f),u.c(),S(u,1),u.m(i,c)):u&&(Ge(),P(u,1,1,()=>{u=null}),Ve());const v={};w&1&&(v.preview=(R=f[0])==null?void 0:R.preview),!p&&w&2&&(p=!0,v.ready=f[1],Be(()=>p=!1)),a.$set(v)},i(f){_||(S(e.$$.fragment,f),S(o.$$.fragment,f),S(u),S(a.$$.fragment,f),S(g.$$.fragment,f),_=!0)},o(f){P(e.$$.fragment,f),P(o.$$.fragment,f),P(u),P(a.$$.fragment,f),P(g.$$.fragment,f),_=!1},d(f){f&&(m(s),m(t),m(r),m(h)),K(e,f),K(o,f),d&&d.d(),u&&u.d(),n[17](null),K(a),K(g,f)}}}function Nt(n,e,s){let o,t,r,i;x(n,ae,y=>s(2,r=y)),x(n,Qe,y=>s(14,i=y)),We();let l,c,a,p,h;const g=["https://pudding.cool/assets/fonts/rubik/rubik-v14-latin-regular.woff2","https://pudding.cool/assets/fonts/rubik/rubik-v14-latin-700.woff2","https://pudding.cool/assets/fonts/rubik/rubik-v14-latin-900.woff2"],{title:_,description:d,url:u,keywords:A}=me;$e("copy",me);function O(y){if(!y)return;const j=y.toLowerCase(),I=o,z=j.indexOf(I),H=z+I.length,oe=y.slice(0,z),k=y.slice(z,H),Ae=k.split(":")[0],Ce=k.split(":")[1],Oe=y.slice(H);return[{text:oe},{mark:!0,text:[Ae,":",Ce]},{text:Oe}]}function L(){s(0,c={name:o,artist:"No Track Found",href:""}),audioEl&&(audioEl.pause(),audioEl.currentTime=0)}function f(){const y=l.filter(j=>j.time===o);if(!y.length)L();else{const j=y.filter(H=>H.probably_time==="true").length>1,I=y.filter(H=>j?H.probably_time==="true":!0),z=Math.floor(Math.random()*I.length);c==null||c.id,s(0,c={...I[z]}),a.play()}}function w(){f()}async function v(){const y=await Je("../assets/tracks.csv");s(12,l=y.map(j=>({...j,popularity:+j.popularity})))}const R=()=>Le(ae,r=!1,r);function ne(y){p=y,s(1,p)}function re(y){ce[y?"unshift":"push"](()=>{a=y,s(3,a)})}const se=()=>f();return n.$$.update=()=>{n.$$.dirty&16384&&s(13,o=i.time),n.$$.dirty&16384&&i.period,n.$$.dirty&12290&&l&&p&&w(),n.$$.dirty&1&&s(5,t=O(c==null?void 0:c.name)),n.$$.dirty&4&&(r||s(4,h=!0))},v(),[c,p,r,a,h,t,g,_,d,u,A,f,l,o,i,R,ne,re,se]}class jt extends X{constructor(e){super(),Y(this,e,Nt,Et,W,{})}}export{jt as component};
