import{s as te,a as E,f as j,e as D,c as N,g as C,A as re,j as F,i as y,d as h,z as ae,B as oe,l as S,h as L,m as W,x as g,n as M,C as se,D as ce}from"../chunks/scheduler.709e9ffa.js";import{S as fe,i as me,b as U,d as G,m as J,a as K,t as Q,e as R}from"../chunks/index.c0a1f920.js";import{M as _e,v as pe,e as H,c as V}from"../chunks/version.ac3675be.js";import{c as ue,a as he}from"../chunks/clock.495e8d01.js";import{W as de}from"../chunks/WIP.ddbe6f62.js";function X(r,s,i){const e=r.slice();return e[14]=s[i],e}function Y(r,s,i){const e=r.slice();e[17]=s[i].text,e[18]=s[i].highlight;const t=e[18]?"mark":"span";return e[19]=t,e}function Z(r){let s,i,e,t,l,c,n,d,w,m=r[1].title+"",a,v,$=r[1].artist+"",P,k=H(r[2]),p=[];for(let o=0;o<k.length;o+=1)p[o]=ee(X(r,k,o));return{c(){s=j("time"),i=S(r[0]),e=E(),t=S(r[3]),l=E(),c=j("h1"),n=j("span");for(let o=0;o<p.length;o+=1)p[o].c();d=E(),w=j("span"),a=S(m),v=S(" by "),P=S($),this.h()},l(o){s=C(o,"TIME",{class:!0});var _=L(s);i=W(_,r[0]),e=N(_),t=W(_,r[3]),_.forEach(h),l=N(o),c=C(o,"H1",{class:!0});var f=L(c);n=C(f,"SPAN",{class:!0});var b=L(n);for(let A=0;A<p.length;A+=1)p[A].l(b);b.forEach(h),d=N(f),w=C(f,"SPAN",{class:!0});var u=L(w);a=W(u,m),v=W(u," by "),P=W(u,$),u.forEach(h),f.forEach(h),this.h()},h(){F(s,"class","svelte-kwjyrw"),F(n,"class","title svelte-kwjyrw"),F(w,"class","artist svelte-kwjyrw"),F(c,"class","svelte-kwjyrw")},m(o,_){y(o,s,_),g(s,i),g(s,e),g(s,t),y(o,l,_),y(o,c,_),g(c,n);for(let f=0;f<p.length;f+=1)p[f]&&p[f].m(n,null);g(c,d),g(c,w),g(w,a),g(w,v),g(w,P)},p(o,_){if(_&1&&M(i,o[0]),_&8&&M(t,o[3]),_&4){k=H(o[2]);let f;for(f=0;f<k.length;f+=1){const b=X(o,k,f);p[f]?p[f].p(b,_):(p[f]=ee(b),p[f].c(),p[f].m(n,null))}for(;f<p.length;f+=1)p[f].d(1);p.length=k.length}_&2&&m!==(m=o[1].title+"")&&M(a,m),_&2&&$!==($=o[1].artist+"")&&M(P,$)},d(o){o&&(h(s),h(l),h(c)),se(p,o)}}}function I(r){let s,i=r[17]+"",e;return{c(){s=j(r[19]),e=S(i),this.h()},l(t){s=C(t,(r[19]||"null").toUpperCase(),{class:!0});var l=L(s);e=W(l,i),l.forEach(h),this.h()},h(){ce(r[19])(s,{class:"svelte-kwjyrw"})},m(t,l){y(t,s,l),g(s,e)},p(t,l){l&4&&i!==(i=t[17]+"")&&M(e,i)},d(t){t&&h(s)}}}function x(r){let s=r[19],i,e=r[19]&&I(r);return{c(){e&&e.c(),i=D()},l(t){e&&e.l(t),i=D()},m(t,l){e&&e.m(t,l),y(t,i,l)},p(t,l){t[19]?s?te(s,t[19])?(e.d(1),e=I(t),s=t[19],e.c(),e.m(i.parentNode,i)):e.p(t,l):(e=I(t),s=t[19],e.c(),e.m(i.parentNode,i)):s&&(e.d(1),e=null,s=t[19])},d(t){t&&h(i),e&&e.d(t)}}}function ee(r){let s,i,e=H(r[14]),t=[];for(let l=0;l<e.length;l+=1)t[l]=x(Y(r,e,l));return{c(){s=j("p");for(let l=0;l<t.length;l+=1)t[l].c();i=E(),this.h()},l(l){s=C(l,"P",{class:!0});var c=L(s);for(let n=0;n<t.length;n+=1)t[n].l(c);i=N(c),c.forEach(h),this.h()},h(){F(s,"class","svelte-kwjyrw")},m(l,c){y(l,s,c);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,null);g(s,i)},p(l,c){if(c&4){e=H(l[14]);let n;for(n=0;n<e.length;n+=1){const d=Y(l,e,n);t[n]?t[n].p(d,c):(t[n]=x(d),t[n].c(),t[n].m(s,i))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},d(l){l&&h(s),se(t,l)}}}function ve(r){let s,i,e,t,l,c="a clock where the time is in song lyrics",n,d,w;s=new _e({props:{title:r[5],description:r[6],url:r[7],preloadFont:r[4],keywords:r[8]}}),e=new de({});let m=r[1]&&Z(r);return{c(){U(s.$$.fragment),i=E(),U(e.$$.fragment),t=E(),l=j("h1"),l.textContent=c,n=E(),m&&m.c(),d=D(),this.h()},l(a){G(s.$$.fragment,a),i=N(a),G(e.$$.fragment,a),t=N(a),l=C(a,"H1",{class:!0,"data-svelte-h":!0}),re(l)!=="svelte-xf3j02"&&(l.textContent=c),n=N(a),m&&m.l(a),d=D(),this.h()},h(){F(l,"class","svelte-kwjyrw")},m(a,v){J(s,a,v),y(a,i,v),J(e,a,v),y(a,t,v),y(a,l,v),y(a,n,v),m&&m.m(a,v),y(a,d,v),w=!0},p(a,[v]){a[1]?m?m.p(a,v):(m=Z(a),m.c(),m.m(d.parentNode,d)):m&&(m.d(1),m=null)},i(a){w||(K(s.$$.fragment,a),K(e.$$.fragment,a),w=!0)},o(a){Q(s.$$.fragment,a),Q(e.$$.fragment,a),w=!1},d(a){a&&(h(i),h(t),h(l),h(n),h(d)),R(s,a),R(e,a),m&&m.d(a)}}}function we(r,s,i){let e,t,l;ae(r,he,o=>i(10,l=o)),pe();let c,n,d;const w=[],{title:m,description:a,url:v,keywords:$}=V;oe("copy",V);function P(o,_,f){return o.split(`
`).map(u=>{const A=_?e:f,O=u.toLowerCase(),q=t.toLowerCase(),z=O.indexOf(`${e} ${q}`)>-1?`${e} ${q}`:A,T=O.indexOf(z);if(T>-1){const B=T+z.length,le=u.slice(0,T),ne=u.slice(T,B),ie=u.slice(B);return[{text:le},{text:ne,highlight:!0},{text:ie}]}return[{text:u}]})}function k(){const o=c.filter(u=>u.time===e&&u.value),_=o.some(u=>!u.timeWords),f=o.filter(u=>_?!u.timeWords:!0),b=0;n==null||n.id,i(1,n={...f[b]}),i(2,d=P(n.value,_,n.timeWords))}async function p(){const o=await ue("../assets/lyrics.csv");i(9,c=o.map(_=>({..._,verified:_.verified==="true",pageviews:+_.pageviews})))}return r.$$.update=()=>{r.$$.dirty&1024&&i(0,e=l.time),r.$$.dirty&1024&&i(3,t=l.period),r.$$.dirty&513&&c&&k()},p(),[e,n,d,t,w,m,a,v,$,c,l]}class Ee extends fe{constructor(s){super(),me(this,s,we,ve,te,{})}}export{Ee as component};
