import{s as V,e as ee,f as te}from"../chunks/scheduler.b5ae7a1c.js";import{S as se,i as le,r as ne,s as F,g as b,e as O,u as ie,c as L,h as j,z as oe,k as S,v as ae,a as w,d as re,t as ce,f as d,w as fe,m as N,j as $,n as P,y as v,o as M,A as X,B as _e}from"../chunks/index.f51f2042.js";import{M as me,v as pe,e as q,c as U}from"../chunks/version.4c728b27.js";import{c as ue,a as he}from"../chunks/clock.d10aa51e.js";function G(o,s,i){const e=o.slice();return e[14]=s[i],e}function J(o,s,i){const e=o.slice();e[17]=s[i].text,e[18]=s[i].highlight;const t=e[18]?"mark":"span";return e[19]=t,e}function K(o){let s,i,e,t,l,c,n,f,a,h=o[1].title+"",C,T,k=o[1].artist+"",E,g=q(o[2]),p=[];for(let r=0;r<g.length;r+=1)p[r]=R(G(o,g,r));return{c(){s=b("time"),i=N(o[0]),e=F(),t=N(o[3]),l=F(),c=b("h1"),n=b("span");for(let r=0;r<p.length;r+=1)p[r].c();f=F(),a=b("span"),C=N(h),T=N(" by "),E=N(k),this.h()},l(r){s=j(r,"TIME",{class:!0});var m=$(s);i=P(m,o[0]),e=L(m),t=P(m,o[3]),m.forEach(d),l=L(r),c=j(r,"H1",{class:!0});var _=$(c);n=j(_,"SPAN",{class:!0});var y=$(n);for(let A=0;A<p.length;A+=1)p[A].l(y);y.forEach(d),f=L(_),a=j(_,"SPAN",{class:!0});var u=$(a);C=P(u,h),T=P(u," by "),E=P(u,k),u.forEach(d),_.forEach(d),this.h()},h(){S(s,"class","svelte-kwjyrw"),S(n,"class","title svelte-kwjyrw"),S(a,"class","artist svelte-kwjyrw"),S(c,"class","svelte-kwjyrw")},m(r,m){w(r,s,m),v(s,i),v(s,e),v(s,t),w(r,l,m),w(r,c,m),v(c,n);for(let _=0;_<p.length;_+=1)p[_]&&p[_].m(n,null);v(c,f),v(c,a),v(a,C),v(a,T),v(a,E)},p(r,m){if(m&1&&M(i,r[0]),m&8&&M(t,r[3]),m&4){g=q(r[2]);let _;for(_=0;_<g.length;_+=1){const y=G(r,g,_);p[_]?p[_].p(y,m):(p[_]=R(y),p[_].c(),p[_].m(n,null))}for(;_<p.length;_+=1)p[_].d(1);p.length=g.length}m&2&&h!==(h=r[1].title+"")&&M(C,h),m&2&&k!==(k=r[1].artist+"")&&M(E,k)},d(r){r&&(d(s),d(l),d(c)),X(p,r)}}}function z(o){let s,i=o[17]+"",e;return{c(){s=b(o[19]),e=N(i),this.h()},l(t){s=j(t,(o[19]||"null").toUpperCase(),{class:!0});var l=$(s);e=P(l,i),l.forEach(d),this.h()},h(){_e(o[19])(s,{class:"svelte-kwjyrw"})},m(t,l){w(t,s,l),v(s,e)},p(t,l){l&4&&i!==(i=t[17]+"")&&M(e,i)},d(t){t&&d(s)}}}function Q(o){let s=o[19],i,e=o[19]&&z(o);return{c(){e&&e.c(),i=O()},l(t){e&&e.l(t),i=O()},m(t,l){e&&e.m(t,l),w(t,i,l)},p(t,l){t[19]?s?V(s,t[19])?(e.d(1),e=z(t),s=t[19],e.c(),e.m(i.parentNode,i)):e.p(t,l):(e=z(t),s=t[19],e.c(),e.m(i.parentNode,i)):s&&(e.d(1),e=null,s=t[19])},d(t){t&&d(i),e&&e.d(t)}}}function R(o){let s,i,e=q(o[14]),t=[];for(let l=0;l<e.length;l+=1)t[l]=Q(J(o,e,l));return{c(){s=b("p");for(let l=0;l<t.length;l+=1)t[l].c();i=F(),this.h()},l(l){s=j(l,"P",{class:!0});var c=$(s);for(let n=0;n<t.length;n+=1)t[n].l(c);i=L(c),c.forEach(d),this.h()},h(){S(s,"class","svelte-kwjyrw")},m(l,c){w(l,s,c);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,null);v(s,i)},p(l,c){if(c&4){e=q(l[14]);let n;for(n=0;n<e.length;n+=1){const f=J(l,e,n);t[n]?t[n].p(f,c):(t[n]=Q(f),t[n].c(),t[n].m(s,i))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},d(l){l&&d(s),X(t,l)}}}function de(o){let s,i,e,t="This is a clock where the time is in the lyrics of a song.",l,c,n;s=new me({props:{title:o[5],description:o[6],url:o[7],preloadFont:o[4],keywords:o[8]}});let f=o[1]&&K(o);return{c(){ne(s.$$.fragment),i=F(),e=b("p"),e.textContent=t,l=F(),f&&f.c(),c=O(),this.h()},l(a){ie(s.$$.fragment,a),i=L(a),e=j(a,"P",{class:!0,"data-svelte-h":!0}),oe(e)!=="svelte-s94sln"&&(e.textContent=t),l=L(a),f&&f.l(a),c=O(),this.h()},h(){S(e,"class","svelte-kwjyrw")},m(a,h){ae(s,a,h),w(a,i,h),w(a,e,h),w(a,l,h),f&&f.m(a,h),w(a,c,h),n=!0},p(a,[h]){a[1]?f?f.p(a,h):(f=K(a),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i(a){n||(re(s.$$.fragment,a),n=!0)},o(a){ce(s.$$.fragment,a),n=!1},d(a){a&&(d(i),d(e),d(l),d(c)),fe(s,a),f&&f.d(a)}}}function ve(o,s,i){let e,t,l;ee(o,he,r=>i(10,l=r)),pe();let c,n,f;const a=[],{title:h,description:C,url:T,keywords:k}=U;te("copy",U);function E(r,m,_){return r.split(`
`).map(u=>{const A=m?e:_,B=u.toLowerCase(),D=t.toLowerCase(),H=B.indexOf(`${e} ${D}`)>-1?`${e} ${D}`:A,W=B.indexOf(H);if(W>-1){const I=W+H.length,Y=u.slice(0,W),Z=u.slice(W,I),x=u.slice(I);return[{text:Y},{text:Z,highlight:!0},{text:x}]}return[{text:u}]})}function g(){const r=c.filter(u=>u.time===e&&u.value),m=r.some(u=>!u.timeWords),_=r.filter(u=>m?!u.timeWords:!0),y=0;n==null||n.id,i(1,n={..._[y]}),i(2,f=E(n.value,m,n.timeWords))}async function p(){const r=await ue("../assets/lyrics.csv");i(9,c=r.map(m=>({...m,verified:m.verified==="true",pageviews:+m.pageviews})))}return o.$$.update=()=>{o.$$.dirty&1024&&i(0,e=l.time),o.$$.dirty&1024&&i(3,t=l.period),o.$$.dirty&513&&c&&g()},p(),[e,n,f,t,a,h,C,T,k,c,l]}class Ce extends se{constructor(s){super(),le(this,s,ve,de,V,{})}}export{Ce as component};
