import{s as L,i as $,n as V,o as G,b as J,e as K,f as Q}from"../chunks/scheduler.b5ae7a1c.js";import{S as A,i as D,g as v,s as b,e as E,h as w,z as M,c as g,k as z,a as m,D as X,f as u,j as F,y as C,C as Z,r as H,u as O,v as W,d as y,t as T,b as x,w as q,m as N,n as P,o as Y,p as ee}from"../chunks/index.f51f2042.js";import{c as te,a as se}from"../chunks/clock.d10aa51e.js";import{M as ie,v as ne,c as B}from"../chunks/version.4c728b27.js";function R(i){let e,l,r="Enable Video",f,c;return{c(){e=v("p"),l=v("button"),l.textContent=r,this.h()},l(s){e=w(s,"P",{class:!0});var n=F(e);l=w(n,"BUTTON",{"data-svelte-h":!0}),M(l)!=="svelte-17ja6a2"&&(l.textContent=r),n.forEach(u),this.h()},h(){z(e,"class","svelte-173wwg8")},m(s,n){m(s,e,n),C(e,l),f||(c=Z(l,"click",i[3]),f=!0)},p:V,d(s){s&&u(e),f=!1,c()}}}function oe(i){let e,l='<div id="player-yt" class="svelte-173wwg8"></div>',r,f,c,s=i[0]&&R(i);return{c(){e=v("div"),e.innerHTML=l,f=b(),s&&s.c(),c=E(),this.h()},l(n){e=w(n,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-34vwxe"&&(e.innerHTML=l),f=g(n),s&&s.l(n),c=E(),this.h()},h(){z(e,"class","player-wrapper svelte-173wwg8"),$(()=>i[8].call(e))},m(n,t){m(n,e,t),i[7](e),r=X(e,i[8].bind(e)),m(n,f,t),s&&s.m(n,t),m(n,c,t)},p(n,[t]){n[0]?s?s.p(n,t):(s=R(n),s.c(),s.m(c.parentNode,c)):s&&(s.d(1),s=null)},i:V,o:V,d(n){n&&(u(e),u(f),u(c)),i[7](null),r(),s&&s.d(n)}}}function le(){const i=document.createElement("script");i.src="https://www.youtube.com/iframe_api";const e=document.getElementsByTagName("script")[0];e?e.parentNode.insertBefore(i,e):document.body.appendChild(i)}function ae(i){}function re(i,e,l){let r=null,f=!1,c,s=0,{timestamp:n}=e,{id:t}=e;const o=16/9;function a(){console.log(s);const p=s,U=p/o;r.setSize(p,U)}function d({data:p}){}function _(){l(0,f=!0),console.log({ready:f})}function S(){if(console.log("load",f,t),t)r.loadVideoById({videoId:t,startSeconds:n}),r.playVideo();else return}function h(){r.playVideo()}G(()=>{le(),window.onYouTubeIframeAPIReady=function(){l(6,r=new YT.Player("player-yt",{playerVars:{controls:1,cc_load_policy:1,enablejsapi:1,fs:1,iv_load_policy:3,modestbranding:1,rel:0,showinfo:0,playsinline:1,color:"white"},events:{onReady:_,onStateChange:d,onError:ae}}))}});function k(p){J[p?"unshift":"push"](()=>{c=p,l(2,c)})}function I(){s=this.clientWidth,l(1,s)}return i.$$set=p=>{"timestamp"in p&&l(4,n=p.timestamp),"id"in p&&l(5,t=p.id)},i.$$.update=()=>{i.$$.dirty&33&&f&&S(),i.$$.dirty&66&&r&&a(),i.$$.dirty&16&&console.log({timestamp:n})},[f,s,c,h,n,t,r,k,I]}class ce extends A{constructor(e){super(),D(this,e,re,oe,L,{timestamp:4,id:5})}}function j(i){let e,l=i[0].time+"",r,f,c=i[0].period+"",s,n,t,o;return t=new ce({props:{id:i[1].vid,timestamp:+i[1].start}}),{c(){e=v("time"),r=N(l),f=b(),s=N(c),n=b(),H(t.$$.fragment),this.h()},l(a){e=w(a,"TIME",{class:!0});var d=F(e);r=P(d,l),f=g(d),s=P(d,c),d.forEach(u),n=g(a),O(t.$$.fragment,a),this.h()},h(){z(e,"class","svelte-1bcbzx8")},m(a,d){m(a,e,d),C(e,r),C(e,f),C(e,s),m(a,n,d),W(t,a,d),o=!0},p(a,d){(!o||d&1)&&l!==(l=a[0].time+"")&&Y(r,l),(!o||d&1)&&c!==(c=a[0].period+"")&&Y(s,c);const _={};d&2&&(_.id=a[1].vid),d&2&&(_.timestamp=+a[1].start),t.$set(_)},i(a){o||(y(t.$$.fragment,a),o=!0)},o(a){T(t.$$.fragment,a),o=!1},d(a){a&&(u(e),u(n)),q(t,a)}}}function fe(i){let e,l,r,f="This is a clock where the time is said in a YouTube video.",c,s,n;e=new ie({props:{title:i[3],description:i[4],url:i[5],preloadFont:i[2],keywords:i[6]}});let t=i[1]&&j(i);return{c(){H(e.$$.fragment),l=b(),r=v("p"),r.textContent=f,c=b(),t&&t.c(),s=E(),this.h()},l(o){O(e.$$.fragment,o),l=g(o),r=w(o,"P",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-1pofrpd"&&(r.textContent=f),c=g(o),t&&t.l(o),s=E(),this.h()},h(){z(r,"class","svelte-1bcbzx8")},m(o,a){W(e,o,a),m(o,l,a),m(o,r,a),m(o,c,a),t&&t.m(o,a),m(o,s,a),n=!0},p(o,[a]){o[1]?t?(t.p(o,a),a&2&&y(t,1)):(t=j(o),t.c(),y(t,1),t.m(s.parentNode,s)):t&&(ee(),T(t,1,1,()=>{t=null}),x())},i(o){n||(y(e.$$.fragment,o),y(t),n=!0)},o(o){T(e.$$.fragment,o),T(t),n=!1},d(o){o&&(u(l),u(r),u(c),u(s)),q(e,o),t&&t.d(o)}}}function de(i,e,l){let r,f;K(i,se,h=>l(0,f=h)),ne();let c,s;const n=[],{title:t,description:o,url:a,keywords:d}=B;Q("copy",B);function _(){const h=c.filter(I=>I.time===r);l(1,s={...h[0]})}async function S(){const h=await te("../assets/videos.csv");l(7,c=h.map(k=>({...k})))}return i.$$.update=()=>{i.$$.dirty&1&&l(8,r=`${f.time}${f.period}`.toLowerCase()),i.$$.dirty&384&&c&&_()},S(),[f,s,n,t,o,a,d,c,r]}class he extends A{constructor(e){super(),D(this,e,de,fe,L,{})}}export{he as component};
