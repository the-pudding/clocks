import{s as te,a as E,f as j,e as D,c as N,g as C,B as ae,j as F,i as y,d as h,A as re,C as oe,l as S,h as L,m as W,u as g,n as M,D as se,E as ce}from"../chunks/scheduler.4c2085d6.js";import{S as fe,i as _e,b as z,d as G,m as J,a as K,t as Q,e as R}from"../chunks/index.3764b306.js";import{M as me,W as ue,v as pe,e as H,c as V}from"../chunks/version.0d014b85.js";import{c as he,a as de}from"../chunks/clock.6996aad5.js";function X(a,s,i){const e=a.slice();return e[14]=s[i],e}function Y(a,s,i){const e=a.slice();e[17]=s[i].text,e[18]=s[i].highlight;const t=e[18]?"mark":"span";return e[19]=t,e}function Z(a){let s,i,e,t,l,c,n,d,w,_=a[1].title+"",r,v,$=a[1].artist+"",P,k=H(a[2]),u=[];for(let o=0;o<k.length;o+=1)u[o]=ee(X(a,k,o));return{c(){s=j("time"),i=S(a[0]),e=E(),t=S(a[3]),l=E(),c=j("h1"),n=j("span");for(let o=0;o<u.length;o+=1)u[o].c();d=E(),w=j("span"),r=S(_),v=S(" by "),P=S($),this.h()},l(o){s=C(o,"TIME",{class:!0});var m=L(s);i=W(m,a[0]),e=N(m),t=W(m,a[3]),m.forEach(h),l=N(o),c=C(o,"H1",{class:!0});var f=L(c);n=C(f,"SPAN",{class:!0});var b=L(n);for(let A=0;A<u.length;A+=1)u[A].l(b);b.forEach(h),d=N(f),w=C(f,"SPAN",{class:!0});var p=L(w);r=W(p,_),v=W(p," by "),P=W(p,$),p.forEach(h),f.forEach(h),this.h()},h(){F(s,"class","svelte-kwjyrw"),F(n,"class","title svelte-kwjyrw"),F(w,"class","artist svelte-kwjyrw"),F(c,"class","svelte-kwjyrw")},m(o,m){y(o,s,m),g(s,i),g(s,e),g(s,t),y(o,l,m),y(o,c,m),g(c,n);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(n,null);g(c,d),g(c,w),g(w,r),g(w,v),g(w,P)},p(o,m){if(m&1&&M(i,o[0]),m&8&&M(t,o[3]),m&4){k=H(o[2]);let f;for(f=0;f<k.length;f+=1){const b=X(o,k,f);u[f]?u[f].p(b,m):(u[f]=ee(b),u[f].c(),u[f].m(n,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=k.length}m&2&&_!==(_=o[1].title+"")&&M(r,_),m&2&&$!==($=o[1].artist+"")&&M(P,$)},d(o){o&&(h(s),h(l),h(c)),se(u,o)}}}function I(a){let s,i=a[17]+"",e;return{c(){s=j(a[19]),e=S(i),this.h()},l(t){s=C(t,(a[19]||"null").toUpperCase(),{class:!0});var l=L(s);e=W(l,i),l.forEach(h),this.h()},h(){ce(a[19])(s,{class:"svelte-kwjyrw"})},m(t,l){y(t,s,l),g(s,e)},p(t,l){l&4&&i!==(i=t[17]+"")&&M(e,i)},d(t){t&&h(s)}}}function x(a){let s=a[19],i,e=a[19]&&I(a);return{c(){e&&e.c(),i=D()},l(t){e&&e.l(t),i=D()},m(t,l){e&&e.m(t,l),y(t,i,l)},p(t,l){t[19]?s?te(s,t[19])?(e.d(1),e=I(t),s=t[19],e.c(),e.m(i.parentNode,i)):e.p(t,l):(e=I(t),s=t[19],e.c(),e.m(i.parentNode,i)):s&&(e.d(1),e=null,s=t[19])},d(t){t&&h(i),e&&e.d(t)}}}function ee(a){let s,i,e=H(a[14]),t=[];for(let l=0;l<e.length;l+=1)t[l]=x(Y(a,e,l));return{c(){s=j("p");for(let l=0;l<t.length;l+=1)t[l].c();i=E(),this.h()},l(l){s=C(l,"P",{class:!0});var c=L(s);for(let n=0;n<t.length;n+=1)t[n].l(c);i=N(c),c.forEach(h),this.h()},h(){F(s,"class","svelte-kwjyrw")},m(l,c){y(l,s,c);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(s,null);g(s,i)},p(l,c){if(c&4){e=H(l[14]);let n;for(n=0;n<e.length;n+=1){const d=Y(l,e,n);t[n]?t[n].p(d,c):(t[n]=x(d),t[n].c(),t[n].m(s,i))}for(;n<t.length;n+=1)t[n].d(1);t.length=e.length}},d(l){l&&h(s),se(t,l)}}}function ve(a){let s,i,e,t,l,c="a clock where the time is in song lyrics",n,d,w;s=new me({props:{title:a[5],description:a[6],url:a[7],preloadFont:a[4],keywords:a[8]}}),e=new ue({});let _=a[1]&&Z(a);return{c(){z(s.$$.fragment),i=E(),z(e.$$.fragment),t=E(),l=j("h1"),l.textContent=c,n=E(),_&&_.c(),d=D(),this.h()},l(r){G(s.$$.fragment,r),i=N(r),G(e.$$.fragment,r),t=N(r),l=C(r,"H1",{class:!0,"data-svelte-h":!0}),ae(l)!=="svelte-xf3j02"&&(l.textContent=c),n=N(r),_&&_.l(r),d=D(),this.h()},h(){F(l,"class","svelte-kwjyrw")},m(r,v){J(s,r,v),y(r,i,v),J(e,r,v),y(r,t,v),y(r,l,v),y(r,n,v),_&&_.m(r,v),y(r,d,v),w=!0},p(r,[v]){r[1]?_?_.p(r,v):(_=Z(r),_.c(),_.m(d.parentNode,d)):_&&(_.d(1),_=null)},i(r){w||(K(s.$$.fragment,r),K(e.$$.fragment,r),w=!0)},o(r){Q(s.$$.fragment,r),Q(e.$$.fragment,r),w=!1},d(r){r&&(h(i),h(t),h(l),h(n),h(d)),R(s,r),R(e,r),_&&_.d(r)}}}function we(a,s,i){let e,t,l;re(a,de,o=>i(10,l=o)),pe();let c,n,d;const w=[],{title:_,description:r,url:v,keywords:$}=V;oe("copy",V);function P(o,m,f){return o.split(`
`).map(p=>{const A=m?e:f,O=p.toLowerCase(),q=t.toLowerCase(),B=O.indexOf(`${e} ${q}`)>-1?`${e} ${q}`:A,T=O.indexOf(B);if(T>-1){const U=T+B.length,le=p.slice(0,T),ne=p.slice(T,U),ie=p.slice(U);return[{text:le},{text:ne,highlight:!0},{text:ie}]}return[{text:p}]})}function k(){const o=c.filter(p=>p.time===e&&p.value),m=o.some(p=>!p.timeWords),f=o.filter(p=>m?!p.timeWords:!0),b=0;n==null||n.id,i(1,n={...f[b]}),i(2,d=P(n.value,m,n.timeWords))}async function u(){const o=await he("../assets/lyrics.csv");i(9,c=o.map(m=>({...m,verified:m.verified==="true",pageviews:+m.pageviews})))}return a.$$.update=()=>{a.$$.dirty&1024&&i(0,e=l.time),a.$$.dirty&1024&&i(3,t=l.period),a.$$.dirty&513&&c&&k()},u(),[e,n,d,t,w,_,r,v,$,c,l]}class Ce extends fe{constructor(s){super(),_e(this,s,we,ve,te,{})}}export{Ce as component};
